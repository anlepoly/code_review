diff --git a/examples/Browser.qml b/examples/Browser.qml
index e2eb3e5..2fb4c31 100644
--- a/examples/Browser.qml
+++ b/examples/Browser.qml
@@ -1,6 +1,5 @@
 import QtQuick 2.0
 import QtDesktop 0.2
-import QtDesktop 0.2 as QtDesktop // purely for overriding Window
 import QtWebKit 1.0
 import "content"
 
@@ -24,7 +23,7 @@ Rectangle {
             frame.removeTab(frame.current)
     }
 
-    QtDesktop.Window {
+    Window {
         id: settingsDialog
         width: 200
         height: 200
diff --git a/examples/Gallery.qml b/examples/Gallery.qml
index b1eb173..3127819 100644
--- a/examples/Gallery.qml
+++ b/examples/Gallery.qml
@@ -1,8 +1,5 @@
 import QtQuick 2.0
-//import "../components"
-import QtQuick.Window 2.0
 import QtDesktop 0.2
-import QtDesktop 0.2 as QtDesktop // purely for overriding Window
 import "content"
 
 
@@ -67,7 +64,7 @@ Rectangle {
             onAccepted: { console.log("Accepted: " + filePath) }
         }
 
-        QtDesktop.Window {
+        Window {
             id: window1
 
             width: 400
diff --git a/examples/TopLevel.qml b/examples/TopLevel.qml
index 83c5bb2..9b6e412 100644
--- a/examples/TopLevel.qml
+++ b/examples/TopLevel.qml
@@ -1,5 +1,4 @@
 import QtQuick 2.0
-import QtQuick.Window 2.0
 import QtDesktop 0.2
 import "content"
 
diff --git a/examples/TopLevelBrowser.qml b/examples/TopLevelBrowser.qml
index 55736b6..ce8995a 100644
--- a/examples/TopLevelBrowser.qml
+++ b/examples/TopLevelBrowser.qml
@@ -1,9 +1,8 @@
 import QtQuick 2.0
 import QtDesktop 0.2
-import QtDesktop 0.2 as QtDesktop // purely for overriding Window
 import "content"
 
-QtDesktop.Window {
+Window {
     id: topLevelBrowser
     title: "Qml Desktop Browser"
 
diff --git a/imports/QtDesktop/ApplicationWindow.qml b/imports/QtDesktop/ApplicationWindow.qml
index 9692e19..6d1e90c 100644
--- a/imports/QtDesktop/ApplicationWindow.qml
+++ b/imports/QtDesktop/ApplicationWindow.qml
@@ -39,8 +39,7 @@
 ****************************************************************************/
 
 import QtQuick 2.0
-import QtQuick.Window 2.0
-import QtDesktop 0.1 as QtDesktop
+import QtDesktop 0.2
 
 Window {
     width: 320
diff --git a/imports/QtDesktop/Dialog.qml b/imports/QtDesktop/Dialog.qml
index 82cf0a3..2b1d176 100644
--- a/imports/QtDesktop/Dialog.qml
+++ b/imports/QtDesktop/Dialog.qml
@@ -39,9 +39,9 @@
 ****************************************************************************/
 
 import QtQuick 2.0
-import QtDesktop 0.1 as QtDesktop // purely for override of Window
+import QtQuick.Window 2.0
 
-QtDesktop.Window {
+Window {
     id: dialog
 
     width: 400
diff --git a/qmldesktopviewer/loggerwidget.cpp b/qmldesktopviewer/loggerwidget.cpp
deleted file mode 100644
index 42269e6..0000000
--- a/qmldesktopviewer/loggerwidget.cpp
+++ /dev/null
@@ -1,201 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the examples of the Qt Toolkit.
-**
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOTgall
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#include <qglobal.h>
-#include <QDebug>
-#include <QSettings>
-#include <QActionGroup>
-#include <QMenu>
-#include <QPlainTextEdit>
-#include <QLabel>
-#include <QVBoxLayout>
-
-#include "loggerwidget.h"
-
-QT_BEGIN_NAMESPACE
-
-LoggerWidget::LoggerWidget(QWidget *parent) :
-    QMainWindow(parent),
-    m_visibilityOrigin(SettingsOrigin)
-{
-    setAttribute(Qt::WA_QuitOnClose, false);
-    setWindowTitle(tr("Warnings"));
-
-    m_plainTextEdit = new QPlainTextEdit();
-
-    setCentralWidget(m_plainTextEdit);
-
-    m_noWarningsLabel = new QLabel(m_plainTextEdit);
-    m_noWarningsLabel->setText(tr("(No warnings)"));
-    m_noWarningsLabel->setAlignment(Qt::AlignVCenter | Qt::AlignHCenter);
-    QVBoxLayout *layout = new QVBoxLayout;
-    layout->addWidget(m_noWarningsLabel);
-    m_plainTextEdit->setLayout(layout);
-    connect(m_plainTextEdit, SIGNAL(textChanged()), this, SLOT(updateNoWarningsLabel()));
-
-    readSettings();
-    setupPreferencesMenu();
-}
-
-void LoggerWidget::append(const QString &msg)
-{
-    m_plainTextEdit->appendPlainText(msg);
-
-    if (!isVisible() && (defaultVisibility() == AutoShowWarnings))
-        setVisible(true);
-}
-
-LoggerWidget::Visibility LoggerWidget::defaultVisibility() const
-{
-    return m_visibility;
-}
-
-void LoggerWidget::setDefaultVisibility(LoggerWidget::Visibility visibility)
-{
-    if (m_visibility == visibility)
-        return;
-
-    m_visibility = visibility;
-    m_visibilityOrigin = CommandLineOrigin;
-
-    m_preferencesMenu->setEnabled(m_visibilityOrigin == SettingsOrigin);
-}
-
-QMenu *LoggerWidget::preferencesMenu()
-{
-    return m_preferencesMenu;
-}
-
-QAction *LoggerWidget::showAction()
-{
-    return m_showWidgetAction;
-}
-
-void LoggerWidget::readSettings()
-{
-    QSettings settings;
-    QString warningsPreferences = settings.value("warnings", "hide").toString();
-    if (warningsPreferences == "show") {
-        m_visibility = ShowWarnings;
-    } else if (warningsPreferences == "hide") {
-        m_visibility = HideWarnings;
-    } else {
-        m_visibility = AutoShowWarnings;
-    }
-}
-
-void LoggerWidget::saveSettings()
-{
-    if (m_visibilityOrigin != SettingsOrigin)
-        return;
-
-    QString value = "autoShow";
-    if (defaultVisibility() == ShowWarnings) {
-        value = "show";
-    } else if (defaultVisibility() == HideWarnings) {
-        value = "hide";
-    }
-
-    QSettings settings;
-    settings.setValue("warnings", value);
-}
-
-void LoggerWidget::warningsPreferenceChanged(QAction *action)
-{
-    Visibility newSetting = static_cast<Visibility>(action->data().toInt());
-    m_visibility = newSetting;
-    saveSettings();
-}
-
-void LoggerWidget::showEvent(QShowEvent *event)
-{
-    QWidget::showEvent(event);
-    emit opened();
-}
-
-void LoggerWidget::closeEvent(QCloseEvent *event)
-{
-    QWidget::closeEvent(event);
-    emit closed();
-}
-
-void LoggerWidget::setupPreferencesMenu()
-{
-    m_preferencesMenu = new QMenu(tr("Warnings"));
-    QActionGroup *warnings = new QActionGroup(m_preferencesMenu);
-    warnings->setExclusive(true);
-
-    connect(warnings, SIGNAL(triggered(QAction*)), this, SLOT(warningsPreferenceChanged(QAction*)));
-
-    QAction *showWarningsPreference = new QAction(tr("Show by default"), m_preferencesMenu);
-    showWarningsPreference->setCheckable(true);
-    showWarningsPreference->setData(LoggerWidget::ShowWarnings);
-    warnings->addAction(showWarningsPreference);
-    m_preferencesMenu->addAction(showWarningsPreference);
-
-    QAction *hideWarningsPreference = new QAction(tr("Hide by default"), m_preferencesMenu);
-    hideWarningsPreference->setCheckable(true);
-    hideWarningsPreference->setData(LoggerWidget::HideWarnings);
-    warnings->addAction(hideWarningsPreference);
-    m_preferencesMenu->addAction(hideWarningsPreference);
-
-    QAction *autoWarningsPreference = new QAction(tr("Show for first warning"), m_preferencesMenu);
-    autoWarningsPreference->setCheckable(true);
-    autoWarningsPreference->setData(LoggerWidget::AutoShowWarnings);
-    warnings->addAction(autoWarningsPreference);
-    m_preferencesMenu->addAction(autoWarningsPreference);
-
-    switch (defaultVisibility()) {
-    case LoggerWidget::ShowWarnings:
-        showWarningsPreference->setChecked(true);
-        break;
-    case LoggerWidget::HideWarnings:
-        hideWarningsPreference->setChecked(true);
-        break;
-    default:
-        autoWarningsPreference->setChecked(true);
-    }
-}
-
-void LoggerWidget::updateNoWarningsLabel()
-{
-    m_noWarningsLabel->setVisible(m_plainTextEdit->toPlainText().length() == 0);
-}
-
-QT_END_NAMESPACE
diff --git a/qmldesktopviewer/loggerwidget.h b/qmldesktopviewer/loggerwidget.h
deleted file mode 100644
index 5980602..0000000
--- a/qmldesktopviewer/loggerwidget.h
+++ /dev/null
@@ -1,99 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the examples of the Qt Toolkit.
-**
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOTgall
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#ifndef LOGGERWIDGET_H
-#define LOGGERWIDGET_H
-
-#include <QMainWindow>
-#include <QMetaType>
-
-QT_BEGIN_NAMESPACE
-
-class QPlainTextEdit;
-class QLabel;
-class QMenu;
-class QAction;
-
-class LoggerWidget : public QMainWindow {
-    Q_OBJECT
-public:
-    LoggerWidget(QWidget *parent=0);
-
-    enum Visibility { ShowWarnings, HideWarnings, AutoShowWarnings };
-
-    Visibility defaultVisibility() const;
-    void setDefaultVisibility(Visibility visibility);
-
-    QMenu *preferencesMenu();
-    QAction *showAction();
-
-public slots:
-    void append(const QString &msg);
-    void updateNoWarningsLabel();
-
-private slots:
-    void warningsPreferenceChanged(QAction *action);
-    void readSettings();
-    void saveSettings();
-
-protected:
-    void showEvent(QShowEvent *event);
-    void closeEvent(QCloseEvent *event);
-
-signals:
-    void opened();
-    void closed();
-
-private:
-    void setupPreferencesMenu();
-
-    QMenu *m_preferencesMenu;
-    QAction *m_showWidgetAction;
-    QPlainTextEdit *m_plainTextEdit;
-    QLabel *m_noWarningsLabel;
-    enum ConfigOrigin { CommandLineOrigin, SettingsOrigin };
-    ConfigOrigin m_visibilityOrigin;
-    Visibility m_visibility;
-};
-
-QT_END_NAMESPACE
-
-Q_DECLARE_METATYPE(LoggerWidget::Visibility)
-
-#endif // LOGGERWIDGET_H
diff --git a/qmldesktopviewer/main.cpp b/qmldesktopviewer/main.cpp
deleted file mode 100644
index 4f7a87d..0000000
--- a/qmldesktopviewer/main.cpp
+++ /dev/null
@@ -1,291 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the examples of the Qt Toolkit.
-**
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOTgall
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#include <QtQml>
-#include "qmldesktopviewer.h"
-#include "loggerwidget.h"
-#include <QWidget>
-#include <QDir>
-#include <QApplication>
-#include <QTranslator>
-#include <QDebug>
-#include <QMessageBox>
-#include <QAtomicInt>
-#include <QFileOpenEvent>
-
-QT_USE_NAMESPACE
-
-QtMsgHandler systemMsgOutput = 0;
-
-static QmlDesktopViewer *openFile(const QString &fileName);
-
-QString warnings;
-void exitApp(int i)
-{
-#ifdef Q_OS_WIN
-    // Debugging output is not visible by default on Windows -
-    // therefore show modal dialog with errors instead.
-    if (!warnings.isEmpty()) {
-        QMessageBox::warning(0, QApplication::tr("Qt QML Viewer"), warnings);
-    }
-#endif
-    exit(i);
-}
-
-QWeakPointer<LoggerWidget> logger;
-static QAtomicInt recursiveLock(0);
-
-void myMessageOutput(QtMsgType type, const char *msg)
-{
-    QString strMsg = QString::fromLatin1(msg);
-
-    if (!QCoreApplication::closingDown()) {
-        if (!logger.isNull()) {
-            if (recursiveLock.testAndSetOrdered(0, 1)) {
-                QMetaObject::invokeMethod(logger.data(), "append", Q_ARG(QString, strMsg));
-                recursiveLock = 0;
-            }
-        } else {
-            warnings += strMsg;
-            warnings += QLatin1Char('\n');
-        }
-    }
-
-    if (systemMsgOutput) {
-        systemMsgOutput(type, msg);
-    } else { // Unix
-        fprintf(stderr, "%s\n", msg);
-        fflush(stderr);
-    }
-}
-
-static QmlDesktopViewer* globalViewer = 0;
-
-// The qml file that is shown if the user didn't specify a QML file
-QString initialFile = "qrc:/startup/startup.qml";
-
-void usage()
-{
-    qWarning("Usage: qmlviewer [options] <filename>");
-    qWarning(" ");
-    qWarning(" options:");
-    qWarning("  -v, -version ............................. display version");
-    qWarning("  -warnings [show|hide]..................... show warnings in a separate log window");
-    qWarning("  -translation <translationfile> ........... set the language to run in");
-    qWarning("  -I <directory> ........................... prepend to the module import search path,");
-    qWarning("                                             display path if <directory> is empty");
-    qWarning("  -P <directory> ........................... prepend to the plugin search path");
-    qWarning(" ");
-    qWarning(" Press F1 for interactive help");
-
-    exitApp(1);
-}
-
-enum WarningsConfig { ShowWarnings, HideWarnings, DefaultWarnings };
-
-struct ViewerOptions
-{
-    ViewerOptions()
-        : warningsConfig(DefaultWarnings),
-          sizeToView(true)
-    {
-    }
-
-    QStringList imports;
-    QStringList plugins;
-    QString translationFile;
-    WarningsConfig warningsConfig;
-    bool sizeToView;
-};
-
-static ViewerOptions opts;
-static QStringList fileNames;
-
-class Application : public QApplication
-{
-    Q_OBJECT
-public:
-    Application(int &argc, char **&argv)
-        : QApplication(argc, argv)
-    {}
-
-protected:
-    bool event(QEvent *ev)
-    {
-        if (ev->type() != QEvent::FileOpen)
-            return QApplication::event(ev);
-
-        QFileOpenEvent *fev = static_cast<QFileOpenEvent *>(ev);
-
-        globalViewer->open(fev->file());
-
-        return true;
-    }
-
-private Q_SLOTS:
-    void showInitialViewer()
-    {
-        QApplication::processEvents();
-
-        QmlDesktopViewer *viewer = globalViewer;
-        if (!viewer)
-            return;
-    }
-};
-
-static void parseCommandLineOptions(const QStringList &arguments)
-{
-    for (int i = 1; i < arguments.count(); ++i) {
-        bool lastArg = (i == arguments.count() - 1);
-        QString arg = arguments.at(i);
-        if (arg == QLatin1String("-v") || arg == QLatin1String("-version")) {
-            qWarning("Qt QML Viewer version %s", QT_VERSION_STR);
-            exitApp(0);
-        } else if (arg == "-translation") {
-            if (lastArg) usage();
-            opts.translationFile = arguments.at(++i);
-        } else if (arg == "-warnings") {
-            if (lastArg) usage();
-            QString warningsStr = arguments.at(++i);
-            if (warningsStr == QLatin1String("show")) {
-                opts.warningsConfig = ShowWarnings;
-            } else if (warningsStr == QLatin1String("hide")) {
-                opts.warningsConfig = HideWarnings;
-            } else {
-                usage();
-            }
-        } else if (arg == "-I" || arg == "-L") {
-            if (arg == "-L")
-                qWarning("-L option provided for compatibility only, use -I instead");
-            if (lastArg) {
-                QQmlEngine tmpEngine;
-                QString paths = tmpEngine.importPathList().join(QLatin1String(":"));
-                qWarning("Current search path: %s", paths.toLocal8Bit().constData());
-                exitApp(0);
-            }
-            opts.imports << arguments.at(++i);
-        } else if (arg == "-P") {
-            if (lastArg) usage();
-            opts.plugins << arguments.at(++i);
-        } else if (!arg.startsWith('-')) {
-            fileNames.append(arg);
-        } else if (true || arg == "-help") {
-            usage();
-        }
-    }
-
-}
-
-static QmlDesktopViewer *createViewer()
-{
-    QmlDesktopViewer *viewer = new QmlDesktopViewer;
-
-    foreach (QString lib, opts.imports)
-        viewer->addLibraryPath(lib);
-
-    foreach (QString plugin, opts.plugins)
-        viewer->addPluginPath(plugin);
-
-    return viewer;
-}
-
-QmlDesktopViewer *openFile(const QString &fileName)
-{
-    globalViewer->open(fileName);
-    return globalViewer;
-}
-
-int main(int argc, char ** argv)
-{
-    systemMsgOutput = qInstallMsgHandler(myMessageOutput);
-
-    Application app(argc, argv);
-    app.setApplicationName("QMLDesktop");
-    app.setOrganizationName("Nokia");
-    app.setOrganizationDomain("nokia.com");
-//    app.setAttribute(Qt::AA_DontUseNativeMenuBar);
-
-    QmlDesktopViewer::registerTypes();
-
-    parseCommandLineOptions(app.arguments());
-
-    QTranslator qmlTranslator;
-    if (!opts.translationFile.isEmpty()) {
-        if (qmlTranslator.load(opts.translationFile)) {
-            app.installTranslator(&qmlTranslator);
-        } else {
-            qWarning() << "Could not load the translation file" << opts.translationFile;
-        }
-    }
-
-    if (fileNames.isEmpty()) {
-        QFile qmlapp(QLatin1String("qmlapp"));
-        if (qmlapp.exists() && qmlapp.open(QFile::ReadOnly)) {
-            QString content = QString::fromUtf8(qmlapp.readAll());
-            qmlapp.close();
-
-            int newline = content.indexOf(QLatin1Char('\n'));
-            if (newline >= 0)
-                fileNames += content.left(newline);
-            else
-                fileNames += content;
-        }
-    }
-
-    globalViewer = createViewer();
-
-    if (fileNames.isEmpty()) {
-        // show the initial viewer delayed.
-        // This prevents an initial viewer popping up while there
-        // are FileOpen events coming through the event queue
-        QTimer::singleShot(1, &app, SLOT(showInitialViewer()));
-    } else {
-        foreach (const QString &fileName, fileNames)
-            openFile(fileName);
-    }
-
-    QObject::connect(&app, SIGNAL(lastWindowClosed()), globalViewer, SLOT(quit()));
-
-    int ret = app.exec();
-    delete globalViewer;
-    return ret;
-}
-
-#include "main.moc"
-
diff --git a/qmldesktopviewer/qmldesktopviewer.cpp b/qmldesktopviewer/qmldesktopviewer.cpp
deleted file mode 100644
index d17d91e..0000000
--- a/qmldesktopviewer/qmldesktopviewer.cpp
+++ /dev/null
@@ -1,182 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the examples of the Qt Toolkit.
-**
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOTgall
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#include "qmldesktopviewer.h"
-#include "loggerwidget.h"
-#include <qquickview.h>
-
-#include <QWidget>
-#include <QApplication>
-#include <QTranslator>
-#include <QLayout>
-#include <QMenuBar>
-#include <QMenu>
-#include <QAction>
-#include <QFileDialog>
-#include <QInputDialog>
-#include <QGraphicsObject>
-#include <QKeyEvent>
-#include <QLocale>
-#include <QDebug>
-
-QT_BEGIN_NAMESPACE
-
-QmlDesktopViewer::QmlDesktopViewer() :
-    _engine(new QQmlEngine(this))//, _rootObject(new QQuickItem)
-{
-    _engine->setParent(this);
-    QmlDesktopViewer::registerTypes();
-
-    connect(_engine, SIGNAL(quit()), this, SLOT(quit()));
-}
-
-QmlDesktopViewer::~QmlDesktopViewer()
-{
-}
-
-void QmlDesktopViewer::addLibraryPath(const QString& lib)
-{
-    engine()->addImportPath(lib);
-}
-
-void QmlDesktopViewer::addPluginPath(const QString& plugin)
-{
-    engine()->addPluginPath(plugin);
-}
-
-void QmlDesktopViewer::statusChanged()
-{
-}
-
-bool QmlDesktopViewer::open(const QString& file_or_url)
-{
-    currentFileOrUrl = file_or_url;
-
-    QUrl url;
-    QFileInfo fi(file_or_url);
-    if (fi.exists())
-        url = QUrl::fromLocalFile(fi.absoluteFilePath());
-    else
-        url = QUrl(file_or_url);
-
-    //delete rootObject();
-    engine()->clearComponentCache();
-    QQmlContext *ctxt = rootContext();
-    ctxt->setContextProperty("qmlDesktopViewer", this);
-    ctxt->setContextProperty("qmlDesktopViewerFolder", QDir::currentPath());
-
-    QString fileName = url.toLocalFile();
-    if (!fileName.isEmpty()) {
-        fi.setFile(fileName);
-        if (fi.exists()) {
-            if (fi.suffix().toLower() != QLatin1String("qml")) {
-                qWarning() << "qml cannot open non-QML file" << fileName;
-                return false;
-            }
-        } else {
-            qWarning() << "qml cannot find file:" << fileName;
-            return false;
-        }
-    }
-
-    execute(url);
-
-    return true;
-}
-
-void QmlDesktopViewer::registerTypes()
-{
-    static bool registered = false;
-
-    if (!registered) {
-        // registering only for exposing the DeviceOrientation::Orientation enum
-//        qmlRegisterUncreatableType<QDesktopItem>("Qt",4,7,"Desktop", QLatin1String("Do not create objects of type Desktop"));
-//        qmlRegisterUncreatableType<QDesktopItem>("QtQuick",1,0,"Desktop",QLatin1String("Do not create objects of type Desktop"));
-        registered = true;
-    }
-}
-
-void QmlDesktopViewer::execute(QUrl url)
-{
-    _component = new QQmlComponent(_engine, url, this);
-    if (!_component->isLoading()) {
-        continueExecute();
-    } else {
-        QObject::connect(_component, SIGNAL(statusChanged(QQmlComponent::Status)), this, SLOT(continueExecute()));
-    }
-}
-
-void QmlDesktopViewer::continueExecute()
-{
-    disconnect(_component, SIGNAL(statusChanged(QQmlComponent::Status)), this, SLOT(continueExecute()));
-
-    if (_component->isError()) {
-        QList<QQmlError> errorList = _component->errors();
-        foreach (const QQmlError &error, errorList) {
-            qWarning() << error;
-        }
-        emit statusChanged(_component->status());
-        return;
-    }
-
-    QObject *obj = _component->create();
-    obj->setParent(_engine);
-
-    if(_component->isError()) {
-        QList<QQmlError> errorList = _component->errors();
-        foreach (const QQmlError &error, errorList) {
-            qWarning() << error;
-        }
-        emit statusChanged(_component->status());
-        return;
-    }
-
-    //_rootObject = qobject_cast<QGraphicsObject*>(obj);
-    //Q_ASSERT(_rootObject);
-    emit statusChanged(_component->status());
-}
-
-void QmlDesktopViewer::quit()
-{
-    qApp->quit();
-}
-
-QT_END_NAMESPACE
-
-
diff --git a/qmldesktopviewer/qmldesktopviewer.h b/qmldesktopviewer/qmldesktopviewer.h
deleted file mode 100644
index 3ac57b5..0000000
--- a/qmldesktopviewer/qmldesktopviewer.h
+++ /dev/null
@@ -1,97 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the examples of the Qt Toolkit.
-**
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOTgall
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#ifndef QMLDESKTOPVIEWER_H
-#define QMLDESKTOPVIEWER_H
-
-#include <QMainWindow>
-#include <QTimer>
-#include <QTime>
-#include <QList>
-#include <QtQml>
-#include <QtQml/QQmlEngine>
-#include <QDebug>
-
-QT_BEGIN_NAMESPACE
-
-class QQuickView;
-class QTranslator;
-class QActionGroup;
-class QMenuBar;
-class LoggerWidget;
-
-class QmlDesktopViewer
-    : public QObject
-{
-    Q_OBJECT
-
-public:
-    QmlDesktopViewer();
-    ~QmlDesktopViewer();
-
-    static void registerTypes();
-
-    void addLibraryPath(const QString& lib);
-    void addPluginPath(const QString& plugin);
-
-    QString currentFile() const { return currentFileOrUrl; }
-    QQmlEngine *engine() { return _engine; }
-    //QGraphicsObject *rootObject() { return _rootObject; }
-    QQmlContext *rootContext() { return _engine->rootContext(); }
-
-public slots:
-    bool open(const QString&);
-    void statusChanged();
-    void execute(QUrl url);
-    void continueExecute();
-    void quit();
-
-private:
-    QString currentFileOrUrl;
-    QQmlEngine *_engine;
-    //QGraphicsObject *_rootObject;
-    QQmlComponent *_component;
-
-signals:
-    void statusChanged(QQmlComponent::Status);
-};
-
-QT_END_NAMESPACE
-
-#endif // QMLDESKTOPVIEWER_H
diff --git a/qmldesktopviewer/qmldesktopviewer.pro b/qmldesktopviewer/qmldesktopviewer.pro
deleted file mode 100644
index 3b7a2ff..0000000
--- a/qmldesktopviewer/qmldesktopviewer.pro
+++ /dev/null
@@ -1,13 +0,0 @@
-TEMPLATE = app
-TARGET = qmldesktopviewer
-DEPENDPATH += .
-INCLUDEPATH += .
-QT += qml widgets quick
-
-# Input
-HEADERS +=  qmldesktopviewer.h \
-            loggerwidget.h
-SOURCES +=  main.cpp \
-            qmldesktopviewer.cpp \
-            loggerwidget.cpp
-CONFIG -=app_bundle
\ No newline at end of file
diff --git a/src/qstyleplugin.cpp b/src/qstyleplugin.cpp
index e7835b0..9bf2f32 100644
--- a/src/qstyleplugin.cpp
+++ b/src/qstyleplugin.cpp
@@ -44,8 +44,6 @@
 #include "qrangemodel.h"
 #include "qtmenu.h"
 #include "qtmenubar.h"
-#include "qwindowitem.h"
-#include "qwindowitem.h"
 #include "qdesktopitem.h"
 #include "qwheelarea.h"
 #include "qtsplitterbase.h"
@@ -57,6 +55,7 @@
 #include <qqmlengine.h>
 #include <qquickimageprovider.h>
 #include <QtWidgets/QApplication>
+#include <QtQuick/QQuickWindow>
 #include <QImage>
 
 // Load icons from desktop theme
@@ -108,8 +107,7 @@ void StylePlugin::registerTypes(const char *uri)
 
     qmlRegisterType<QFileSystemModel>(uri, 0, 2, "FileSystemModel");
     qmlRegisterType<QtSplitterBase>(uri, 0, 2, "Splitter");
-    qmlRegisterType<QWindowItem>(uri, 0, 2, "Window"); // cannot override built-in Window, clients must namespace the import to use this Window.
-    qmlRegisterType<QWindowItem>(uri, 0, 1, "Window"); // cannot override built-in Window, clients must namespace the import to use this Window.
+    qmlRegisterType<QQuickWindow>(uri, 0, 2, "Window");
 
     qmlRegisterUncreatableType<QtMenuBase>(uri, 0, 1, "NativeMenuBase", QLatin1String("Do not create objects of type NativeMenuBase"));
     qmlRegisterUncreatableType<QDesktopItem>(uri, 0,2,"Desktop", QLatin1String("Do not create objects of type Desktop"));
diff --git a/src/qtoplevelwindow.cpp b/src/qtoplevelwindow.cpp
deleted file mode 100644
index cf1ace2..0000000
--- a/src/qtoplevelwindow.cpp
+++ /dev/null
@@ -1,107 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2012 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the Qt Components project.
-**
-** $QT_BEGIN_LICENSE:BSD$
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#include "qtoplevelwindow.h"
-
-#include <QDesktopWidget>
-#include <QtWidgets/QMenuBar>
-
-QTopLevelWindow::QTopLevelWindow()
-    : QQuickView(), _menuBar(new QMenuBar), _positionIsDefined(false)
-{
-    setVisible(false);
-}
-
-QMenuBar *QTopLevelWindow::menuBar()
-{
-    return _menuBar;
-}
-
-QTopLevelWindow::~QTopLevelWindow()
-{
-    foreach (QTopLevelWindow* child, findChildren<QTopLevelWindow*>())
-        child->setParent(0);
-}
-
-void QTopLevelWindow::registerChildWindow(QTopLevelWindow* child)
-{
-    child->setParent(this);
-}
-
-void QTopLevelWindow::hideChildWindows()
-{
-    foreach (QTopLevelWindow* child, findChildren<QTopLevelWindow*>()) {
-        child->hide();
-    }
-}
-
-void QTopLevelWindow::initPosition()
-{
-    if (!_positionIsDefined)
-        center();
-    foreach (QTopLevelWindow* child, findChildren<QTopLevelWindow*>()) {
-        child->initPosition();
-    }
-}
-
-void QTopLevelWindow::center()
-{
-    QPoint parentCenter = QDesktopWidget().screenGeometry().center();
-    QRect thisGeometry = geometry();
-    thisGeometry.moveCenter(parentCenter);
-    setGeometry(thisGeometry);
-}
-
-void QTopLevelWindow::move(int x, int y)
-{
-    move(QPoint(x,y));
-}
-
-void QTopLevelWindow::move(const QPoint &point)
-{
-    _positionIsDefined = true;
-    QQuickView::setPos(point);
-}
-
-void QTopLevelWindow::setWindowFlags(Qt::WindowFlags type)
-{
-    QQuickView::setWindowFlags(type | Qt::Window);
-}
-
diff --git a/src/qtoplevelwindow.h b/src/qtoplevelwindow.h
deleted file mode 100644
index 8a7dcbd..0000000
--- a/src/qtoplevelwindow.h
+++ /dev/null
@@ -1,83 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2012 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the Qt Components project.
-**
-** $QT_BEGIN_LICENSE:BSD$
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#ifndef QTOPLEVELWINDOW_H
-#define QTOPLEVELWINDOW_H
-
-#include <QtCore/qglobal.h>
-
-#include <QMainWindow>
-#include <QtQuick/QQuickView>
-
-#include <QWindowStateChangeEvent>
-#include <QDebug>
-
-// Qt 4, QtQuick1 : QTopLevelWindow is a QMainWindow with a QDeclarativeView centerWidget
-// Qt 5, QtQuick2 : QTopLevelWindow is a QQuickView.
-class QMenuBar;
-class QTopLevelWindow : public QQuickView {
-    Q_OBJECT
-public:
-    QTopLevelWindow();
-    ~QTopLevelWindow();
-
-    QQuickView * view() { return this; }
-    QMenuBar *menuBar();
-    void registerChildWindow(QTopLevelWindow* child);
-    void hideChildWindows();
-    void initPosition();
-    void setWindowFlags(Qt::WindowFlags type);
-
-    void center();
-    void move(int x, int y);
-    void move(const QPoint &);
-
-
-Q_SIGNALS:
-    void visibilityChanged();
-    void windowStateChanged();
-
-private:
-    QMenuBar *_menuBar;
-    bool _positionIsDefined;
-
-};
-
-#endif // QTOPLEVELWINDOW_H
diff --git a/src/qwindowitem.cpp b/src/qwindowitem.cpp
deleted file mode 100644
index fd5a9fe..0000000
--- a/src/qwindowitem.cpp
+++ /dev/null
@@ -1,236 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2012 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the Qt Components project.
-**
-** $QT_BEGIN_LICENSE:BSD$
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#include "qwindowitem.h"
-#include "qtoplevelwindow.h"
-
-#include <QTimer>
-
-QWindowItem::QWindowItem()
-    : QQuickItem()
-    , _window(new QTopLevelWindow)
-    , _positionIsDefined(false)
-    , _delayedVisible(false)
-    , _deleteOnClose(false)
-    , _x(0), _y(0)
-{
-    connect(_window, SIGNAL(visibilityChanged()), this, SIGNAL(visibleChanged()));
-    connect(_window, SIGNAL(windowStateChanged()), this, SIGNAL(windowStateChanged()));
-
-    connect(this, SIGNAL(xChanged()), this, SLOT(updateWindowGeometry()));
-    connect(this, SIGNAL(yChanged()), this, SLOT(updateWindowGeometry()));
-    connect(this, SIGNAL(widthChanged()), this, SLOT(updateWindowGeometry()));
-    connect(this, SIGNAL(heightChanged()), this, SLOT(updateWindowGeometry()));
-
-    view()->setResizeMode(QQuickView::SizeRootObjectToView);
-    _window->installEventFilter(this);
-}
-
-QWindowItem::~QWindowItem()
-{
-    delete _window;
-}
-
-bool QWindowItem::eventFilter(QObject *, QEvent *ev)
-{
-    switch (ev->type()) {
-    case QEvent::Close:
-        close();
-        return _deleteOnClose;
-
-    case QEvent::Resize: {
-        QResizeEvent *rev = static_cast<QResizeEvent *>(ev);
-        setSize(rev->size());
-        break;
-    }
-
-    case QEvent::Move: {
-        QMoveEvent *mev = static_cast<QMoveEvent *>(ev);
-        setPos(mev->pos());
-        break;
-    }
-
-    default:
-        break;
-    }
-    return false;
-}
-
-void QWindowItem::registerChildWindow(QWindowItem *child) {
-    _window->registerChildWindow(child->window());
-}
-
-void QWindowItem::updateParentWindow() {
-    QQuickItem *p = parentItem();
-    while (p) {
-        if (QWindowItem *w = qobject_cast<QWindowItem*>(p)) {
-            w->registerChildWindow(this);
-            return;
-        }
-        p = p->parentItem();
-    }
-}
-
-void QWindowItem::componentComplete()
-{
-    updateParentWindow();
-    this->setParentItem(_window->view()->rootObject());
-    if (_window->isTopLevel())
-        _window->initPosition();
-    QQuickItem::componentComplete();
-    if (_delayedVisible) {
-        setVisible(true);
-    }
-}
-
-void QWindowItem::updateWindowGeometry()
-{
-    // Translate the view's root item on the other direction to keep this item in place
-    QQuickItem *viewRootItem = _window->view()->rootObject();
-    if (viewRootItem) {
-        viewRootItem->setX(-x());
-        viewRootItem->setY(-y());
-    }
-
-    _window->move(x(), y());
-    _window->resize(width(), height());
-}
-
-void QWindowItem::center()
-{
-    _window->center();
-}
-
-void QWindowItem::moveWindow(int x,int y, int lx, int ly)
-{
-    QPoint p = _window->mapToGlobal(QPoint(x,y));
-    p.setX(p.x() - lx);
-    p.setY(p.y() - ly);
-    _window->move(p);
-}
-
-void QWindowItem::setMinimumHeight(int h)
-{
-    _window->setMinimumSize(QSize(_window->minimumSize().width(), h));
-    if (height() < h)
-        setHeight(h);
-}
-
-void QWindowItem::setMaximumHeight(int h)
-{
-    _window->setMaximumSize(QSize(_window->maximumSize().width(), h));
-    if (height() > h)
-        setHeight(h);
-}
-
-void QWindowItem::setMinimumWidth(int w)
-{
-    _window->setMinimumSize(QSize(w, _window->minimumSize().height()));
-    if (width() < w)
-        setWidth(w);
-}
-
-void QWindowItem::setMaximumWidth(int w)
-{
-    _window->setMinimumSize(QSize(w, _window->maximumSize().height()));
-    if (width() > w)
-        setWidth(w);
-}
-
-void QWindowItem::setTitle(QString title)
-{
-    _window->setWindowTitle(title);
-    emit titleChanged();
-}
-
-void QWindowItem::setVisible(bool visible)
-{
-    _window->setWindowFlags(_window->windowFlags() | Qt::Window);
-    if (visible) {
-        if (isComponentComplete()) {
-            // avoid flickering when showing the widget,
-            // by passing the event loop at least once
-            QTimer::singleShot(1, _window, SLOT(show()));
-        } else {
-            _delayedVisible = true;
-        }
-    } else {
-        _window->hide();
-    }
-}
-
-void QWindowItem::setWindowDecoration(bool s)
-{
-    bool visible = _window->isVisible();
-
-
-    _window->setWindowFlags(s ? _window->windowFlags() & ~Qt::FramelessWindowHint
-                              : _window->windowFlags() | Qt::FramelessWindowHint);
-    if (visible)
-        _window->show();
-    emit windowDecorationChanged();
-}
-
-void QWindowItem::setModal(bool modal)
-{
-    bool visible = _window->isVisible();
-    _window->hide();
-    _window->setWindowModality(modal ? Qt::WindowModal : Qt::NonModal);
-
-    if (visible)
-        _window->show();
-    emit modalityChanged();
-}
-
-void QWindowItem::setDeleteOnClose(bool deleteOnClose)
-{
-    if (deleteOnClose == _deleteOnClose)
-        return;
-    _deleteOnClose = deleteOnClose;
-    emit deleteOnCloseChanged();
-}
-
-void QWindowItem::close()
-{
-    if (_deleteOnClose)
-        deleteLater();
-    else
-        _window->hide();
-}
diff --git a/src/qwindowitem.h b/src/qwindowitem.h
deleted file mode 100644
index 472015c..0000000
--- a/src/qwindowitem.h
+++ /dev/null
@@ -1,128 +0,0 @@
-/****************************************************************************
-**
-** Copyright (C) 2012 Nokia Corporation and/or its subsidiary(-ies).
-** All rights reserved.
-** Contact: Nokia Corporation (qt-info@nokia.com)
-**
-** This file is part of the Qt Components project.
-**
-** $QT_BEGIN_LICENSE:BSD$
-** You may use this file under the terms of the BSD license as follows:
-**
-** "Redistribution and use in source and binary forms, with or without
-** modification, are permitted provided that the following conditions are
-** met:
-**   * Redistributions of source code must retain the above copyright
-**     notice, this list of conditions and the following disclaimer.
-**   * Redistributions in binary form must reproduce the above copyright
-**     notice, this list of conditions and the following disclaimer in
-**     the documentation and/or other materials provided with the
-**     distribution.
-**   * Neither the name of Nokia Corporation and its Subsidiary(-ies) nor
-**     the names of its contributors may be used to endorse or promote
-**     products derived from this software without specific prior written
-**     permission.
-**
-** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
-** "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
-** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
-** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
-** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
-** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
-** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
-** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
-** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
-** $QT_END_LICENSE$
-**
-****************************************************************************/
-
-#ifndef QWindowItem_H
-#define QWindowItem_H
-
-#include "qtoplevelwindow.h"
-
-#include <QtGui/QGuiApplication>
-#include <QtQuick/QQuickItem>
-#include <QtQuick/QQuickView>
-#include <QMenuBar>
-
-class QWindowItem : public QQuickItem
-{
-    Q_OBJECT
-    Q_PROPERTY(int minimumHeight READ minimumHeight WRITE setMinimumHeight NOTIFY minimumHeightChanged)
-    Q_PROPERTY(int maximumHeight READ maximumHeight WRITE setMaximumHeight NOTIFY maximumHeightChanged)
-    Q_PROPERTY(int minimumWidth READ minimumWidth WRITE setMinimumWidth NOTIFY minimumWidthChanged)
-    Q_PROPERTY(int maximumWidth READ maximumWidth WRITE setMaximumWidth NOTIFY maximumWidthChanged)
-    Q_PROPERTY(bool visible READ isVisible WRITE setVisible NOTIFY visibleChanged)
-    Q_PROPERTY(bool windowDecoration READ windowDecoration WRITE setWindowDecoration NOTIFY windowDecorationChanged)
-    Q_PROPERTY(bool modal READ modal WRITE setModal NOTIFY modalityChanged)
-    Q_PROPERTY(bool deleteOnClose READ deleteOnClose WRITE setDeleteOnClose NOTIFY deleteOnCloseChanged)
-    Q_PROPERTY(Qt::WindowState windowState READ windowState WRITE setWindowState NOTIFY windowStateChanged)
-    Q_PROPERTY(QString title READ title WRITE setTitle NOTIFY titleChanged)
-
-public:
-    QWindowItem();
-    ~QWindowItem();
-    QTopLevelWindow *window() { return _window; }
-    QQuickView *view() { return _window->view(); }
-    int minimumHeight() const { return _window->minimumSize().height(); }
-    int maximumHeight() const { return _window->maximumSize().height(); }
-    int minimumWidth() const { return _window->minimumSize().width(); }
-    int maximumWidth() const { return _window->maximumSize().width(); }
-    bool isVisible() const { return _window->isVisible(); }
-    bool windowDecoration() const { return !(_window->windowFlags() & Qt::FramelessWindowHint); }
-    Qt::WindowState windowState() const { return static_cast<Qt::WindowState>(static_cast<int>(_window->windowState()) & ~Qt::WindowActive); }
-    QString title() const { return _window->windowTitle(); }
-    bool deleteOnClose() const { return _deleteOnClose; }
-    bool modal() const { return _window->isModal(); }
-
-    void setMinimumHeight(int height);
-    void setMaximumHeight(int height);
-    void setMinimumWidth(int width);
-    void setMaximumWidth(int width);
-    void setVisible(bool visible);
-    void setWindowDecoration(bool s);
-    void setWindowState(Qt::WindowState state) { _window->setWindowState(state); }
-    void setTitle(QString title);
-    void setModal(bool modal);
-    void setDeleteOnClose(bool close);
-
-public Q_SLOTS:
-    void close();
-
-protected:
-    bool eventFilter(QObject *, QEvent *ev);
-    void updateParentWindow();
-    void registerChildWindow(QWindowItem* child);
-    void componentComplete();
-
-protected Q_SLOTS:
-    void updateWindowGeometry();
-    void center();
-    void moveWindow(int x, int y, int lx, int ly);
-
-Q_SIGNALS:
-    void visibleChanged();
-    void windowDecorationChanged();
-    void windowStateChanged();
-    void minimumHeightChanged();
-    void minimumWidthChanged();
-    void maximumHeightChanged();
-    void maximumWidthChanged();
-    void titleChanged();
-    void modalityChanged();
-    void deleteOnCloseChanged();
-
-private:
-    QTopLevelWindow *_window;
-    bool _complete;
-    bool _positionIsDefined;
-    bool _delayedVisible;
-    bool _deleteOnClose;
-    int _x;
-    int _y;
-};
-
-#endif // QWindowItem_H
diff --git a/src/src.pro b/src/src.pro
index 867abd2..2114df7 100644
--- a/src/src.pro
+++ b/src/src.pro
@@ -18,9 +18,7 @@ HEADERS += qtmenu.h \
            qstyleitem.h \
            qwheelarea.h \
            qtmenuitem.h \
-           qwindowitem.h \
            qdesktopitem.h \
-           qtoplevelwindow.h \
            qquicklayoutengine_p.h \
            qquicklayout.h \
            qquicklinearlayout.h \
@@ -35,9 +33,7 @@ SOURCES += qtmenu.cpp \
            qstyleitem.cpp \
            qwheelarea.cpp \
            qtmenuitem.cpp \
-           qwindowitem.cpp \
            qdesktopitem.cpp \
-           qtoplevelwindow.cpp \
            qquicklayout.cpp \
            qquicklayoutengine.cpp \
            qquicklinearlayout.cpp \
diff --git a/tests/manual/FileDialogTest.qml b/tests/manual/FileDialogTest.qml
index cedfe46..0f78bdb 100644
--- a/tests/manual/FileDialogTest.qml
+++ b/tests/manual/FileDialogTest.qml
@@ -1,9 +1,6 @@
 import QtQuick 2.0
-//import "../components"
-import QtQuick.Window 2.0
 import QtDesktop 0.2
 
-
 Rectangle {
 
     width: 538