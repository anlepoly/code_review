diff --git a/tests/manual/bearerex/bearerex.cpp b/tests/manual/bearerex/bearerex.cpp
index 190be6f..6826312 100644
--- a/tests/manual/bearerex/bearerex.cpp
+++ b/tests/manual/bearerex/bearerex.cpp
@@ -43,6 +43,7 @@
 #include "datatransferer.h"
 
 #include <QtNetwork>
+#include <QtWidgets>
 
 Q_DECLARE_METATYPE(QNetworkConfiguration)
 
@@ -284,7 +285,7 @@ SessionTab::SessionTab(QNetworkConfiguration* apNetworkConfiguration,
     } else if (apNetworkConfiguration->type() == QNetworkConfiguration::ServiceNetwork) {
         snapLineEdit->setText(apNetworkConfiguration->name()+" ("+apNetworkConfiguration->identifier()+")");
     }
-    bearerLineEdit->setText(apNetworkConfiguration->bearerName());
+    bearerLineEdit->setText(apNetworkConfiguration->bearerTypeName());
     sentRecDataLineEdit->setText(QString::number(m_NetworkSession->bytesWritten())+
                                  QString(" / ")+
                                  QString::number(m_NetworkSession->bytesReceived()));
@@ -314,8 +315,6 @@ void SessionTab::on_createQNetworkAccessManagerButton_clicked()
         m_dataTransferer = new DataTransfererQNam(this);
     } else if (type == "QTcpSocket") {
         m_dataTransferer = new DataTransfererQTcp(this);
-    } else if (type == "QHttp") {
-        m_dataTransferer = new DataTransfererQHttp(this);
     } else {
         qDebug("BearerEx Warning, unknown data transfer object requested, not creating anything.");
         return;
@@ -512,10 +511,10 @@ void SessionTab::newState(QNetworkSession::State state)
         QNetworkConfiguration config = m_ConfigManager->configurationFromIdentifier(configId);
         if (config.isValid()) {
             iapLineEdit->setText(config.name()+" ("+config.identifier()+")");
-            bearerLineEdit->setText(config.bearerName());
+            bearerLineEdit->setText(config.bearerTypeName());
         }
     } else {
-        bearerLineEdit->setText(m_NetworkSession->configuration().bearerName());
+        bearerLineEdit->setText(m_NetworkSession->configuration().bearerTypeName());
     }
 
     QString active;
diff --git a/tests/manual/bearerex/bearerex.h b/tests/manual/bearerex/bearerex.h
index 7ab0177..60963e8 100644
--- a/tests/manual/bearerex/bearerex.h
+++ b/tests/manual/bearerex/bearerex.h
@@ -42,7 +42,7 @@
 #ifndef ACCESSPOINTMANAGEREX_H
 #define ACCESSPOINTMANAGEREX_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 #include "ui_detailedinfodialog.h"
 
diff --git a/tests/manual/bearerex/bearerex.pro b/tests/manual/bearerex/bearerex.pro
index 123038d..a49c644 100644
--- a/tests/manual/bearerex/bearerex.pro
+++ b/tests/manual/bearerex/bearerex.pro
@@ -3,6 +3,7 @@ TARGET = BearerEx
 
 QT += core \
       gui \
+      widgets \
       network
 
 FORMS += detailedinfodialog.ui
diff --git a/tests/manual/bearerex/datatransferer.cpp b/tests/manual/bearerex/datatransferer.cpp
index 1380607..648a466 100644
--- a/tests/manual/bearerex/datatransferer.cpp
+++ b/tests/manual/bearerex/datatransferer.cpp
@@ -134,47 +134,6 @@ void DataTransfererQTcp::error(QAbstractSocket::SocketError socketError)
     emit finished(socketError, 0, "QAbstractSocket::SocketError");
 }
 
-// -------- Based on QHttp
-
-DataTransfererQHttp::DataTransfererQHttp(QObject* parent)
-:   DataTransferer(parent)
-{
-    connect(&m_qhttp, SIGNAL(done(bool)), this, SLOT(done(bool)));
-    qDebug("BearerEx DataTransferer QHttp created.");
-}
-
-DataTransfererQHttp::~DataTransfererQHttp()
-{
-    qDebug("BearerEx DataTransferer QHttp destroyed.");
-}
-
-bool DataTransfererQHttp::transferData()
-{
-    qDebug("BearerEx datatransfer for QHttp requested.");
-    if (m_dataTransferOngoing) {
-        return false;
-    }
-    QString urlstring("http://www.google.com");
-    QUrl url(urlstring);
-    m_qhttp.setHost(url.host(), QHttp::ConnectionModeHttp, url.port() == -1 ? 0 : url.port());
-    m_qhttp.get(urlstring);
-    m_dataTransferOngoing = true;
-    return true;
-}
-
-void DataTransfererQHttp::done(bool /*error*/ )
-{
-    qDebug("BearerEx DatatransfererQHttp reply was finished (error code is type QHttp::Error).");
-    qint64 dataReceived = 0;
-    quint32 errorCode = m_qhttp.error();
-    if (m_qhttp.error() == QHttp::NoError) {
-        QString result(m_qhttp.readAll());
-        dataReceived = result.length();
-    }
-    m_dataTransferOngoing = false;
-    emit finished(errorCode, dataReceived, "QHttp::Error");
-}
-
 // -------- Based on QNetworkAccessManager
 
 DataTransfererQNam::DataTransfererQNam(QObject* parent)
diff --git a/tests/manual/bearerex/datatransferer.h b/tests/manual/bearerex/datatransferer.h
index e657b20..4be8572 100644
--- a/tests/manual/bearerex/datatransferer.h
+++ b/tests/manual/bearerex/datatransferer.h
@@ -47,7 +47,6 @@
 #include <QNetworkReply>
 #include <QNetworkAccessManager>
 #include <QTcpSocket>
-#include <QHttp>
 #include <QDebug>
 
 // Interface-class for data transferring object
@@ -111,20 +110,4 @@ private:
     QNetworkAccessManager m_qnam;
 };
 
-class DataTransfererQHttp : public DataTransferer
-{
-    Q_OBJECT
-public:
-    DataTransfererQHttp(QObject* parent = 0);
-    ~DataTransfererQHttp();
-
-    virtual bool transferData();
-
-public slots:
-    void done(bool error);
-
-private:
-    QHttp m_qhttp;
-};
-
 #endif // DATATRANSFERER_H
diff --git a/tests/manual/cocoa/qt_on_cocoa/window.cpp b/tests/manual/cocoa/qt_on_cocoa/window.cpp
index d68e08a..c1d4401 100644
--- a/tests/manual/cocoa/qt_on_cocoa/window.cpp
+++ b/tests/manual/cocoa/qt_on_cocoa/window.cpp
@@ -45,7 +45,7 @@
 
 #include <QBackingStore>
 #include <QPainter>
-#include <QtGui>
+#include <QtWidgets>
 
 static int colorIndexId = 0;
 
diff --git a/tests/manual/cocoa/wheelevent/main.cpp b/tests/manual/cocoa/wheelevent/main.cpp
index 9794989..69c0960 100644
--- a/tests/manual/cocoa/wheelevent/main.cpp
+++ b/tests/manual/cocoa/wheelevent/main.cpp
@@ -40,7 +40,7 @@
 ****************************************************************************/
 
 #include <QtCore>
-#include <QtGui>
+#include <QtWidgets>
 
 #include "window.h"
 
diff --git a/tests/manual/cocoa/wheelevent/window.cpp b/tests/manual/cocoa/wheelevent/window.cpp
index b305b05..66c8af0 100644
--- a/tests/manual/cocoa/wheelevent/window.cpp
+++ b/tests/manual/cocoa/wheelevent/window.cpp
@@ -45,7 +45,7 @@
 
 #include <QBackingStore>
 #include <QPainter>
-#include <QtGui>
+#include <QtWidgets>
 
 static int colorIndexId = 0;
 
diff --git a/tests/manual/gestures/gestures.pro b/tests/manual/gestures/gestures.pro
new file mode 100644
index 0000000..6ff914f
--- /dev/null
+++ b/tests/manual/gestures/gestures.pro
@@ -0,0 +1,4 @@
+TEMPLATE=subdirs
+
+SUBDIRS = graphicsview \
+    scrollarea
diff --git a/tests/manual/gestures/graphicsview/graphicsview.pro b/tests/manual/gestures/graphicsview/graphicsview.pro
index c5f6fe0..9ecd0b3 100644
--- a/tests/manual/gestures/graphicsview/graphicsview.pro
+++ b/tests/manual/gestures/graphicsview/graphicsview.pro
@@ -1,3 +1,5 @@
+QT += widgets
+
 SOURCES += main.cpp \
     imageitem.cpp \
     gestures.cpp \
diff --git a/tests/manual/gestures/graphicsview/main.cpp b/tests/manual/gestures/graphicsview/main.cpp
index ddda06e..465c3a2 100644
--- a/tests/manual/gestures/graphicsview/main.cpp
+++ b/tests/manual/gestures/graphicsview/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 #include "imageitem.h"
 #include "gestures.h"
diff --git a/tests/manual/gestures/scrollarea/main.cpp b/tests/manual/gestures/scrollarea/main.cpp
index d77ce8e..1904419 100644
--- a/tests/manual/gestures/scrollarea/main.cpp
+++ b/tests/manual/gestures/scrollarea/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 #include "mousepangesturerecognizer.h"
 
diff --git a/tests/manual/gestures/scrollarea/scrollarea.pro b/tests/manual/gestures/scrollarea/scrollarea.pro
index 554810e..84e2af3 100644
--- a/tests/manual/gestures/scrollarea/scrollarea.pro
+++ b/tests/manual/gestures/scrollarea/scrollarea.pro
@@ -1,3 +1,5 @@
+QT += widgets
+
 SOURCES = main.cpp \
     mousepangesturerecognizer.cpp
 HEADERS += mousepangesturerecognizer.h
diff --git a/tests/manual/inputmethodhints/inputmethodhints.h b/tests/manual/inputmethodhints/inputmethodhints.h
index 4746c9a..82d3e72 100644
--- a/tests/manual/inputmethodhints/inputmethodhints.h
+++ b/tests/manual/inputmethodhints/inputmethodhints.h
@@ -42,8 +42,8 @@
 #ifndef INPUTMETHODHINTS_H
 #define INPUTMETHODHINTS_H
 
-#include <QtGui/QMainWindow>
-#include "ui_tst_inputmethodhints.h"
+#include <QtWidgets/QMainWindow>
+#include "ui_inputmethodhints.h"
 
 class inputmethodhints : public QMainWindow
 {
diff --git a/tests/manual/inputmethodhints/inputmethodhints.pro b/tests/manual/inputmethodhints/inputmethodhints.pro
index 171c5f1..f253f72 100644
--- a/tests/manual/inputmethodhints/inputmethodhints.pro
+++ b/tests/manual/inputmethodhints/inputmethodhints.pro
@@ -1,8 +1,7 @@
 TEMPLATE = app
 TARGET = tst_inputmethodhints
 
-QT        += core \
-    gui 
+QT        += widgets
 
 HEADERS   += inputmethodhints.h
 SOURCES   += main.cpp \
diff --git a/tests/manual/inputmethodhints/main.cpp b/tests/manual/inputmethodhints/main.cpp
index af3286d..fcd6d16 100644
--- a/tests/manual/inputmethodhints/main.cpp
+++ b/tests/manual/inputmethodhints/main.cpp
@@ -41,7 +41,7 @@
 
 #include "inputmethodhints.h"
 
-#include <QtGui>
+#include <QtWidgets>
 #include <QApplication>
 
 int main(int argc, char *argv[])
diff --git a/tests/manual/keypadnavigation/keypadnavigation.pro b/tests/manual/keypadnavigation/keypadnavigation.pro
index 6d12606..a45d38a 100644
--- a/tests/manual/keypadnavigation/keypadnavigation.pro
+++ b/tests/manual/keypadnavigation/keypadnavigation.pro
@@ -1,2 +1,3 @@
+QT += widgets
 SOURCES += main.cpp
 FORMS += keypadnavigation.ui
diff --git a/tests/manual/keypadnavigation/main.cpp b/tests/manual/keypadnavigation/main.cpp
index 4f7224d..964d46f 100644
--- a/tests/manual/keypadnavigation/main.cpp
+++ b/tests/manual/keypadnavigation/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "ui_keypadnavigation.h"
 
 class KeypadNavigation : public QMainWindow
diff --git a/tests/manual/lance/interactivewidget.cpp b/tests/manual/lance/interactivewidget.cpp
index 55e60a8..0b9d8ee 100644
--- a/tests/manual/lance/interactivewidget.cpp
+++ b/tests/manual/lance/interactivewidget.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 #include "interactivewidget.h"
-#include <QtGui/QToolBox>
+#include <QtWidgets>
 
 InteractiveWidget::InteractiveWidget()
 {
diff --git a/tests/manual/lance/interactivewidget.h b/tests/manual/lance/interactivewidget.h
index e9e5845..879faca 100644
--- a/tests/manual/lance/interactivewidget.h
+++ b/tests/manual/lance/interactivewidget.h
@@ -44,7 +44,7 @@
 #include "widgets.h"
 #include "paintcommands.h"
 
-#include <QtGui>
+#include <QMainWindow>
 
 #include <private/qmath_p.h>
 
diff --git a/tests/manual/lance/lance.pro b/tests/manual/lance/lance.pro
index e24d3f2..4b31936 100644
--- a/tests/manual/lance/lance.pro
+++ b/tests/manual/lance/lance.pro
@@ -1,8 +1,8 @@
-LANCELOT_DIR = $$PWD/../../auto/lancelot
+LANCELOT_DIR = $$PWD/../../auto/other/lancelot
 CONFIG+=console moc
 TEMPLATE = app
 INCLUDEPATH += . $$LANCELOT_DIR
-QT += core-private gui-private
+QT += core-private gui-private widgets printsupport
 
 HEADERS += widgets.h \
            interactivewidget.h \
diff --git a/tests/manual/lance/main.cpp b/tests/manual/lance/main.cpp
index c33cb49..e8bb44a 100644
--- a/tests/manual/lance/main.cpp
+++ b/tests/manual/lance/main.cpp
@@ -43,7 +43,8 @@
 #include "paintcommands.h"
 
 #include <QtCore>
-#include <QtGui>
+#include <QtWidgets>
+#include <QtPrintSupport>
 #include <qimage.h>
 #include <QPicture>
 
@@ -612,14 +613,11 @@ int main(int argc, char **argv)
                 pcmd.setType(type);
                 pcmd.setCheckersBackground(checkers_background);
                 pcmd.setContents(content);
-                bool ps = type == PsType;
                 QPrinter p(highres ? QPrinter::HighResolution : QPrinter::ScreenResolution);
                 QFileInfo input(files.at(j));
-                QString file = QString("%1_%2.%3")
-                               .arg(input.baseName())
-                               .arg(input.suffix())
-                               .arg(ps ? "ps" : "pdf");
-                p.setOutputFormat(ps ? QPrinter::PdfFormat : QPrinter::PostScriptFormat);
+                const QString file = input.baseName() + QLatin1Char('_')
+                                     + input.suffix() + QStringLiteral(".pdf");
+                p.setOutputFormat(QPrinter::PdfFormat);
                 p.setOutputFileName(file);
                 p.setPageSize(QPrinter::A4);
                 QPainter pt(&p);
diff --git a/tests/manual/lance/widgets.h b/tests/manual/lance/widgets.h
index d8a67a7..33115ad 100644
--- a/tests/manual/lance/widgets.h
+++ b/tests/manual/lance/widgets.h
@@ -59,9 +59,6 @@
 #include <QSignalMapper>
 #include <QAction>
 
-
-#include <private/qwindowsurface_p.h>
-
 #include <qmath.h>
 
 const int CP_RADIUS = 10;
@@ -236,12 +233,7 @@ public:
         }
 
         if (m_render_view.isNull()) {
-
-            if (T::window()->windowSurface())
-                m_render_view = T::window()->windowSurface()->grabWidget(this);
-            else
-                m_render_view = QPixmap::grabWidget(this);
-
+            m_render_view = QPixmap::grabWidget(this);
             m_render_view.save("renderView.png");
         }
     }
diff --git a/tests/manual/manual.pro b/tests/manual/manual.pro
new file mode 100644
index 0000000..9df151e
--- /dev/null
+++ b/tests/manual/manual.pro
@@ -0,0 +1,32 @@
+TEMPLATE=subdirs
+
+SUBDIRS = bearerex \
+gestures \
+inputmethodhints \
+keypadnavigation \
+lance \
+network_remote_stresstest \
+network_stresstest \
+qcursor \
+qdesktopwidget \
+qgraphicsitemgroup \
+qgraphicslayout/flicker \
+qhttpnetworkconnection \
+qimagereader \
+qlocale \
+qnetworkaccessmanager/qget \
+qnetworkconfigurationmanager \
+qnetworkreply \
+qssloptions \
+qtabletevent \
+qtbug-8933 \
+qtouchevent \
+qwidget_zorder \
+repaint \
+socketengine \
+textrendering \
+widgets/itemviews/delegate \
+windowflags \
+windowmodality
+
+!contains(QT_CONFIG, openssl):!contains(QT_CONFIG, openssl-linked):SUBDIRS -= qssloptions
diff --git a/tests/manual/network_remote_stresstest/network_remote_stresstest.pro b/tests/manual/network_remote_stresstest/network_remote_stresstest.pro
index 3a581e1..8b52240 100644
--- a/tests/manual/network_remote_stresstest/network_remote_stresstest.pro
+++ b/tests/manual/network_remote_stresstest/network_remote_stresstest.pro
@@ -1,9 +1,10 @@
 CONFIG += testcase
 TARGET = tst_network_remote_stresstest
 
-QT = core network testlib
+QT = core core-private network network-private testlib
 
 SOURCES  += tst_network_remote_stresstest.cpp
 
 RESOURCES += url-list.qrc
 
+LIBS += $$QMAKE_LIBS_NETWORK
diff --git a/tests/manual/network_remote_stresstest/tst_network_remote_stresstest.cpp b/tests/manual/network_remote_stresstest/tst_network_remote_stresstest.cpp
index c2981c6..109ecbe 100644
--- a/tests/manual/network_remote_stresstest/tst_network_remote_stresstest.cpp
+++ b/tests/manual/network_remote_stresstest/tst_network_remote_stresstest.cpp
@@ -235,6 +235,10 @@ void tst_NetworkRemoteStressTest::blockingSequentialRemoteHosts()
     QElapsedTimer outerTimer;
     outerTimer.start();
 
+#ifdef QT_NO_SSL
+    QVERIFY(!useSslSocket);
+#endif // QT_NO_SSL
+
     for (int i = 0; i < urlList.size(); ++i) {
         const QUrl &url = urlList.at(i);
         bool isHttps = url.scheme() == "https";
@@ -243,21 +247,24 @@ void tst_NetworkRemoteStressTest::blockingSequentialRemoteHosts()
         timeout.start();
 
         QSharedPointer<QTcpSocket> socket;
-        if (useSslSocket || isHttps) {
+#ifndef QT_NO_SSL
+        if (useSslSocket || isHttps)
             socket = QSharedPointer<QTcpSocket>(new QSslSocket);
-        } else {
+#endif // QT_NO_SSL
+        if (socket.isNull())
             socket = QSharedPointer<QTcpSocket>(new QTcpSocket);
-        }
 
         socket->connectToHost(url.host(), url.port(isHttps ? 443 : 80));
         QVERIFY2(socket->waitForConnected(10000), "Timeout connecting to " + url.encodedHost());
 
+#ifndef QT_NO_SSL
         if (isHttps) {
             static_cast<QSslSocket *>(socket.data())->setProtocol(QSsl::TlsV1_0);
             static_cast<QSslSocket *>(socket.data())->startClientEncryption();
             static_cast<QSslSocket *>(socket.data())->ignoreSslErrors();
             QVERIFY2(static_cast<QSslSocket *>(socket.data())->waitForEncrypted(10000), "Timeout starting TLS with " + url.encodedHost());
         }
+#endif // QT_NO_SSL
 
         socket->write("GET " + url.toEncoded(QUrl::RemoveScheme | QUrl::RemoveAuthority | QUrl::RemoveFragment) + " HTTP/1.0\r\n"
                       "Connection: close\r\n"
@@ -288,6 +295,10 @@ void tst_NetworkRemoteStressTest::sequentialRemoteHosts()
     QFETCH_GLOBAL(QVector<QUrl>, urlList);
     QFETCH_GLOBAL(bool, useSslSocket);
 
+#ifdef QT_NO_SSL
+    QVERIFY(!useSslSocket);
+#endif // QT_NO_SSL
+
     qint64 totalBytes = 0;
     QElapsedTimer outerTimer;
     outerTimer.start();
@@ -300,15 +311,18 @@ void tst_NetworkRemoteStressTest::sequentialRemoteHosts()
         timeout.start();
 
         QSharedPointer<QTcpSocket> socket;
-        if (useSslSocket || isHttps) {
+#ifndef QT_NO_SSL
+        if (useSslSocket || isHttps)
             socket = QSharedPointer<QTcpSocket>(new QSslSocket);
-        } else {
+#endif // QT_NO_SSL
+        if (socket.isNull())
             socket = QSharedPointer<QTcpSocket>(new QTcpSocket);
-        }
         if (isHttps) {
+#ifndef QT_NO_SSL
             static_cast<QSslSocket *>(socket.data())->setProtocol(QSsl::TlsV1_0);
             static_cast<QSslSocket *>(socket.data())->connectToHostEncrypted(url.host(), url.port(443));
             static_cast<QSslSocket *>(socket.data())->ignoreSslErrors();
+#endif // QT_NO_SSL
         } else {
             socket->connectToHost(url.host(), url.port(80));
         }
@@ -356,6 +370,10 @@ void tst_NetworkRemoteStressTest::parallelRemoteHosts()
 
     QFETCH(int, parallelAttempts);
 
+#ifdef QT_NO_SSL
+    QVERIFY(!useSslSocket);
+#endif // QT_NO_SSL
+
     qint64 totalBytes = 0;
     QElapsedTimer outerTimer;
     outerTimer.start();
@@ -371,15 +389,19 @@ void tst_NetworkRemoteStressTest::parallelRemoteHosts()
         for (int j = 0; j < parallelAttempts && it != urlList.constEnd(); ++j, ++it) {
             const QUrl &url = *it;
             bool isHttps = url.scheme() == "https";
-            QTcpSocket *socket;
+            QTcpSocket *socket = 0;
+#ifndef QT_NO_SSL
             if (useSslSocket || isHttps)
                 socket = new QSslSocket;
-            else
+#endif // QT_NO_SSL
+            if (!socket)
                 socket = new QTcpSocket;
             if (isHttps) {
+#ifndef QT_NO_SSL
                 static_cast<QSslSocket *>(socket)->setProtocol(QSsl::TlsV1_0);
                 static_cast<QSslSocket *>(socket)->connectToHostEncrypted(url.host(), url.port(443));
                 static_cast<QSslSocket *>(socket)->ignoreSslErrors();
+#endif // QT_NO_SSL
             } else {
                 socket->connectToHost(url.host(), url.port(isHttps ? 443 : 80));
             }
diff --git a/tests/manual/network_stresstest/network_stresstest.pro b/tests/manual/network_stresstest/network_stresstest.pro
index caa8436..ebddf12 100644
--- a/tests/manual/network_stresstest/network_stresstest.pro
+++ b/tests/manual/network_stresstest/network_stresstest.pro
@@ -1,7 +1,7 @@
 CONFIG += testcase
 TARGET = tst_network_stresstest
 
-QT = core network testlib
+QT = core-private network-private testlib
 
 SOURCES  += tst_network_stresstest.cpp \
     minihttpserver.cpp
@@ -11,3 +11,4 @@ HEADERS += \
 
 RESOURCES += wwwfiles.qrc
 QMAKE_RESOURCE_FLAGS += -no-compress
+LIBS += $$QMAKE_LIBS_NETWORK
diff --git a/tests/manual/network_stresstest/tst_network_stresstest.cpp b/tests/manual/network_stresstest/tst_network_stresstest.cpp
index 0f2673e..38a516a 100644
--- a/tests/manual/network_stresstest/tst_network_stresstest.cpp
+++ b/tests/manual/network_stresstest/tst_network_stresstest.cpp
@@ -338,13 +338,13 @@ void tst_NetworkStressTest::nativeNonBlockingConnectDisconnect()
             QVERIFY(fd != INVALID_SOCKET);
 
             // set the socket to non-blocking and start connecting
-            unsigned long buf = v;
+            unsigned long buf = 0;
             unsigned long outBuf;
             DWORD sizeWritten = 0;
             QVERIFY(::WSAIoctl(fd, FIONBIO, &buf, sizeof(unsigned long), &outBuf, sizeof(unsigned long), &sizeWritten, 0,0) != SOCKET_ERROR);
 
             while (true) {
-                int connectResult = ::WSAConnect(fd, sockAddrPtr, sockAddrSize, 0,0,0,0);
+                int connectResult = ::WSAConnect(fd, (sockaddr *)addr.data(), addr.size(), 0,0,0,0);
                 if (connectResult == 0 || WSAGetLastError() == WSAEISCONN) {
                     break; // connected
                 } else {
diff --git a/tests/manual/qdesktopwidget/main.cpp b/tests/manual/qdesktopwidget/main.cpp
index d693d6b..32137d7 100644
--- a/tests/manual/qdesktopwidget/main.cpp
+++ b/tests/manual/qdesktopwidget/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 class DesktopView : public QGraphicsView
 {
diff --git a/tests/manual/qdesktopwidget/qdesktopwidget.pro b/tests/manual/qdesktopwidget/qdesktopwidget.pro
index 93d56eb..8979e7e 100644
--- a/tests/manual/qdesktopwidget/qdesktopwidget.pro
+++ b/tests/manual/qdesktopwidget/qdesktopwidget.pro
@@ -1,2 +1,3 @@
 TEMPLATE = app
+QT += widgets
 SOURCES += main.cpp
diff --git a/tests/manual/qgraphicsitemgroup/main.cpp b/tests/manual/qgraphicsitemgroup/main.cpp
index d60941d..d76a3a6 100644
--- a/tests/manual/qgraphicsitemgroup/main.cpp
+++ b/tests/manual/qgraphicsitemgroup/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui/QApplication>
+#include <QtWidgets/QApplication>
 #include "widget.h"
 
 int main(int argc, char *argv[])
diff --git a/tests/manual/qgraphicsitemgroup/qgraphicsitemgroup.pro b/tests/manual/qgraphicsitemgroup/qgraphicsitemgroup.pro
index 6676a2e..6135f74 100644
--- a/tests/manual/qgraphicsitemgroup/qgraphicsitemgroup.pro
+++ b/tests/manual/qgraphicsitemgroup/qgraphicsitemgroup.pro
@@ -1,4 +1,5 @@
 TARGET = qgraphicsitemgroup
+QT += widgets
 TEMPLATE = app
 SOURCES += main.cpp \
     widget.cpp \
diff --git a/tests/manual/qgraphicslayout/flicker/flicker.pro b/tests/manual/qgraphicslayout/flicker/flicker.pro
index 2e09826..d800418 100644
--- a/tests/manual/qgraphicslayout/flicker/flicker.pro
+++ b/tests/manual/qgraphicslayout/flicker/flicker.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS += window.h
 SOURCES += main.cpp window.cpp
diff --git a/tests/manual/qgraphicslayout/flicker/main.cpp b/tests/manual/qgraphicslayout/flicker/main.cpp
index e71915c..2947930 100644
--- a/tests/manual/qgraphicslayout/flicker/main.cpp
+++ b/tests/manual/qgraphicslayout/flicker/main.cpp
@@ -39,8 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
-#include <windows.h>
+#include <QtWidgets>
 #include "window.h"
 
 int main(int argc, char **argv)
diff --git a/tests/manual/qgraphicslayout/flicker/window.h b/tests/manual/qgraphicslayout/flicker/window.h
index 4930381..3b032c3 100644
--- a/tests/manual/qgraphicslayout/flicker/window.h
+++ b/tests/manual/qgraphicslayout/flicker/window.h
@@ -43,7 +43,7 @@
 #define WINDOW_H
 
 
-#include <QtGui>
+#include <QtWidgets>
 
 struct Statistics {
     Statistics() : output(0),
diff --git a/tests/manual/qhttpnetworkconnection/qhttpnetworkconnection.pro b/tests/manual/qhttpnetworkconnection/qhttpnetworkconnection.pro
index fd21007..8e73add 100644
--- a/tests/manual/qhttpnetworkconnection/qhttpnetworkconnection.pro
+++ b/tests/manual/qhttpnetworkconnection/qhttpnetworkconnection.pro
@@ -5,6 +5,4 @@ TARGET = tst_qhttpnetworkconnection
 QT -= gui
 QT += network testlib
 
-CONFIG += release
-
 SOURCES += main.cpp
diff --git a/tests/manual/qimagereader/main.cpp b/tests/manual/qimagereader/main.cpp
index 44cdc6a..e225c1b 100644
--- a/tests/manual/qimagereader/main.cpp
+++ b/tests/manual/qimagereader/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 class MyWidget : public QWidget
 {
diff --git a/tests/manual/qimagereader/qimagereader.pro b/tests/manual/qimagereader/qimagereader.pro
index 28dcadc..3523257 100644
--- a/tests/manual/qimagereader/qimagereader.pro
+++ b/tests/manual/qimagereader/qimagereader.pro
@@ -1 +1,2 @@
+QT += widgets
 SOURCES += main.cpp
diff --git a/tests/manual/qlocale/calendar.cpp b/tests/manual/qlocale/calendar.cpp
index e23af4f..122f57f 100644
--- a/tests/manual/qlocale/calendar.cpp
+++ b/tests/manual/qlocale/calendar.cpp
@@ -38,7 +38,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 #include "calendar.h"
 
diff --git a/tests/manual/qlocale/calendar.h b/tests/manual/qlocale/calendar.h
index bf0d5ef..7780e82 100644
--- a/tests/manual/qlocale/calendar.h
+++ b/tests/manual/qlocale/calendar.h
@@ -41,7 +41,7 @@
 #ifndef CALENDAR_H
 #define CALENDAR_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class CalendarWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/currency.h b/tests/manual/qlocale/currency.h
index 1d3d536..f722889 100644
--- a/tests/manual/qlocale/currency.h
+++ b/tests/manual/qlocale/currency.h
@@ -41,7 +41,7 @@
 #ifndef CURRENCY_H
 #define CURRENCY_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class CurrencyWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/dateformats.h b/tests/manual/qlocale/dateformats.h
index 78ef623..9355475 100644
--- a/tests/manual/qlocale/dateformats.h
+++ b/tests/manual/qlocale/dateformats.h
@@ -41,7 +41,7 @@
 #ifndef DATEFORMATS_H
 #define DATEFORMATS_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class DateFormatsWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/info.h b/tests/manual/qlocale/info.h
index 6cd7818..0c74dfb 100644
--- a/tests/manual/qlocale/info.h
+++ b/tests/manual/qlocale/info.h
@@ -41,7 +41,7 @@
 #ifndef INFO_H
 #define INFO_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class InfoWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/languages.h b/tests/manual/qlocale/languages.h
index 6723e0f..07a86f6 100644
--- a/tests/manual/qlocale/languages.h
+++ b/tests/manual/qlocale/languages.h
@@ -41,7 +41,7 @@
 #ifndef LANGUAGES_H
 #define LANGUAGES_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class LanguagesWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/main.cpp b/tests/manual/qlocale/main.cpp
index 337dbb6..8c4e257 100644
--- a/tests/manual/qlocale/main.cpp
+++ b/tests/manual/qlocale/main.cpp
@@ -38,7 +38,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 #include "window.h"
 
diff --git a/tests/manual/qlocale/miscellaneous.h b/tests/manual/qlocale/miscellaneous.h
index 2548f0d..61ada8a 100644
--- a/tests/manual/qlocale/miscellaneous.h
+++ b/tests/manual/qlocale/miscellaneous.h
@@ -41,7 +41,7 @@
 #ifndef MISCELLANEOUS_H
 #define MISCELLANEOUS_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class MiscWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/numberformats.h b/tests/manual/qlocale/numberformats.h
index 8243d11..bcc352a 100644
--- a/tests/manual/qlocale/numberformats.h
+++ b/tests/manual/qlocale/numberformats.h
@@ -41,7 +41,7 @@
 #ifndef NUMBERFORMATS_H
 #define NUMBERFORMATS_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 class NumberFormatsWidget : public QWidget
 {
diff --git a/tests/manual/qlocale/qlocale.pro b/tests/manual/qlocale/qlocale.pro
index 4eadded..a5a2766 100644
--- a/tests/manual/qlocale/qlocale.pro
+++ b/tests/manual/qlocale/qlocale.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS += currency.h calendar.h dateformats.h numberformats.h languages.h window.h miscellaneous.h info.h
 SOURCES += currency.cpp main.cpp calendar.cpp dateformats.cpp numberformats.cpp languages.cpp window.cpp miscellaneous.cpp info.cpp
diff --git a/tests/manual/qlocale/window.h b/tests/manual/qlocale/window.h
index 1b2825a..524ed97 100644
--- a/tests/manual/qlocale/window.h
+++ b/tests/manual/qlocale/window.h
@@ -41,7 +41,7 @@
 #ifndef WINDOW_H
 #define WINDOW_H
 
-#include <QtGui>
+#include <QtWidgets>
 
 #include "calendar.h"
 #include "currency.h"
diff --git a/tests/manual/qnetworkaccessmanager/qget/qget.h b/tests/manual/qnetworkaccessmanager/qget/qget.h
index bad4f5e..978212d 100644
--- a/tests/manual/qnetworkaccessmanager/qget/qget.h
+++ b/tests/manual/qnetworkaccessmanager/qget/qget.h
@@ -113,7 +113,9 @@ private slots:
     void finished(QNetworkReply *reply);
     void authenticationRequired(QNetworkReply *reply, QAuthenticator *authenticator);
     void proxyAuthenticationRequired(const QNetworkProxy &proxy, QAuthenticator *authenticator);
+#ifndef QT_NO_SSL
     void sslErrors(QNetworkReply *reply, const QList<QSslError> &errors);
+#endif
     void downloadFinished(TransferItem *item);
 private:
     TransferItem *findTransfer(QNetworkReply *reply);
diff --git a/tests/manual/qnetworkconfigurationmanager/qnetworkconfigurationmanager.pro b/tests/manual/qnetworkconfigurationmanager/qnetworkconfigurationmanager.pro
index 7ad271c..9e78f91 100644
--- a/tests/manual/qnetworkconfigurationmanager/qnetworkconfigurationmanager.pro
+++ b/tests/manual/qnetworkconfigurationmanager/qnetworkconfigurationmanager.pro
@@ -5,6 +5,4 @@ TARGET = tst_qnetworkconfigurationmanager
 QT -= gui
 QT += network testlib
 
-CONFIG += release
-
 SOURCES += main.cpp
diff --git a/tests/manual/qnetworkreply/qnetworkreply.pro b/tests/manual/qnetworkreply/qnetworkreply.pro
index 17f48c6..e29ea78 100644
--- a/tests/manual/qnetworkreply/qnetworkreply.pro
+++ b/tests/manual/qnetworkreply/qnetworkreply.pro
@@ -5,6 +5,4 @@ TARGET = tst_qnetworkreply
 QT -= gui
 QT += network testlib
 
-CONFIG += release
-
 SOURCES += main.cpp
diff --git a/tests/manual/qtabletevent/device_information/device_information.pro b/tests/manual/qtabletevent/device_information/device_information.pro
new file mode 100644
index 0000000..727ad34
--- /dev/null
+++ b/tests/manual/qtabletevent/device_information/device_information.pro
@@ -0,0 +1,6 @@
+QT += widgets
+SOURCES += \
+    main.cpp \
+    tabletwidget.cpp
+HEADERS += \
+    tabletwidget.h
diff --git a/tests/manual/qtabletevent/device_information/main.cpp b/tests/manual/qtabletevent/device_information/main.cpp
index b4eea78..e551ae7 100644
--- a/tests/manual/qtabletevent/device_information/main.cpp
+++ b/tests/manual/qtabletevent/device_information/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QApplication>
 #include "tabletwidget.h"
 
 int main(int argc, char **argv) {
diff --git a/tests/manual/qtabletevent/device_information/qtabletevent.pro b/tests/manual/qtabletevent/device_information/qtabletevent.pro
deleted file mode 100644
index 8251d73..0000000
--- a/tests/manual/qtabletevent/device_information/qtabletevent.pro
+++ /dev/null
@@ -1,5 +0,0 @@
-SOURCES += \
-    main.cpp \
-    tabletwidget.cpp
-HEADERS += \
-    tabletwidget.h
diff --git a/tests/manual/qtabletevent/event_compression/event_compression.pro b/tests/manual/qtabletevent/event_compression/event_compression.pro
index fd2521e..15650d6 100644
--- a/tests/manual/qtabletevent/event_compression/event_compression.pro
+++ b/tests/manual/qtabletevent/event_compression/event_compression.pro
@@ -1,4 +1,4 @@
-QT += testlib
+QT += widgets testlib
 
 SOURCES += main.cpp \
     mousestatwidget.cpp
diff --git a/tests/manual/qtabletevent/qtabletevent.pro b/tests/manual/qtabletevent/qtabletevent.pro
new file mode 100644
index 0000000..9e9fc39
--- /dev/null
+++ b/tests/manual/qtabletevent/qtabletevent.pro
@@ -0,0 +1,5 @@
+TEMPLATE=subdirs
+
+SUBDIRS = device_information \
+    event_compression \
+    regular_widgets
diff --git a/tests/manual/qtabletevent/regular_widgets/regular_widgets.pro b/tests/manual/qtabletevent/regular_widgets/regular_widgets.pro
index 9f0da76..8f1f434 100644
--- a/tests/manual/qtabletevent/regular_widgets/regular_widgets.pro
+++ b/tests/manual/qtabletevent/regular_widgets/regular_widgets.pro
@@ -1,3 +1,4 @@
 TEMPLATE = app
+QT += widgets
 
 SOURCES += main.cpp
diff --git a/tests/manual/qtbug-8933/main.cpp b/tests/manual/qtbug-8933/main.cpp
index d60941d..d76a3a6 100644
--- a/tests/manual/qtbug-8933/main.cpp
+++ b/tests/manual/qtbug-8933/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui/QApplication>
+#include <QtWidgets/QApplication>
 #include "widget.h"
 
 int main(int argc, char *argv[])
diff --git a/tests/manual/qtbug-8933/qtbug-8933.pro b/tests/manual/qtbug-8933/qtbug-8933.pro
index 8b87c83..4600d47 100644
--- a/tests/manual/qtbug-8933/qtbug-8933.pro
+++ b/tests/manual/qtbug-8933/qtbug-8933.pro
@@ -6,7 +6,7 @@
 
 TARGET = qtbug-8933
 TEMPLATE = app
-
+QT += widgets
 
 SOURCES += main.cpp\
         widget.cpp
diff --git a/tests/manual/qtouchevent/main.cpp b/tests/manual/qtouchevent/main.cpp
index 206413b..80598e4 100644
--- a/tests/manual/qtouchevent/main.cpp
+++ b/tests/manual/qtouchevent/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include <QtTest>
 
 #include "ui_form.h"
diff --git a/tests/manual/qtouchevent/qtouchevent.pro b/tests/manual/qtouchevent/qtouchevent.pro
index de1ee06..6339bce 100644
--- a/tests/manual/qtouchevent/qtouchevent.pro
+++ b/tests/manual/qtouchevent/qtouchevent.pro
@@ -1,4 +1,4 @@
-QT += testlib
+QT += widgets testlib
 SOURCES = main.cpp \
     touchwidget.cpp
 FORMS += form.ui
diff --git a/tests/manual/qwidget_zorder/main.cpp b/tests/manual/qwidget_zorder/main.cpp
index dadc089..8c92ac8 100644
--- a/tests/manual/qwidget_zorder/main.cpp
+++ b/tests/manual/qwidget_zorder/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 class Widget : public QWidget
 {
diff --git a/tests/manual/qwidget_zorder/qwidget_zorder.pro b/tests/manual/qwidget_zorder/qwidget_zorder.pro
index 28dcadc..3523257 100644
--- a/tests/manual/qwidget_zorder/qwidget_zorder.pro
+++ b/tests/manual/qwidget_zorder/qwidget_zorder.pro
@@ -1 +1,2 @@
+QT += widgets
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/mainwindow/main.cpp b/tests/manual/repaint/mainwindow/main.cpp
index c6f0ac6..08b6002 100644
--- a/tests/manual/repaint/mainwindow/main.cpp
+++ b/tests/manual/repaint/mainwindow/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "../shared/shared.h"
 
 int main(int argc, char **argv)
diff --git a/tests/manual/repaint/mainwindow/mainwindow.pro b/tests/manual/repaint/mainwindow/mainwindow.pro
index db6b2d2..f20e5fe 100644
--- a/tests/manual/repaint/mainwindow/mainwindow.pro
+++ b/tests/manual/repaint/mainwindow/mainwindow.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS += ../shared/shared.h
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/repaint.pro b/tests/manual/repaint/repaint.pro
new file mode 100644
index 0000000..7ad9d68
--- /dev/null
+++ b/tests/manual/repaint/repaint.pro
@@ -0,0 +1,9 @@
+TEMPLATE=subdirs
+
+SUBDIRS = mainwindow \
+    scrollarea \
+    splitter \
+    tableview \
+    task141091 \
+    toplevel \
+    widget
diff --git a/tests/manual/repaint/scrollarea/main.cpp b/tests/manual/repaint/scrollarea/main.cpp
index 63fb755..06d598d 100644
--- a/tests/manual/repaint/scrollarea/main.cpp
+++ b/tests/manual/repaint/scrollarea/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "../shared/shared.h"
 
 
diff --git a/tests/manual/repaint/scrollarea/scrollarea.pro b/tests/manual/repaint/scrollarea/scrollarea.pro
index db6b2d2..f20e5fe 100644
--- a/tests/manual/repaint/scrollarea/scrollarea.pro
+++ b/tests/manual/repaint/scrollarea/scrollarea.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS += ../shared/shared.h
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/shared/shared.h b/tests/manual/repaint/shared/shared.h
index 861d417..3489c30 100644
--- a/tests/manual/repaint/shared/shared.h
+++ b/tests/manual/repaint/shared/shared.h
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 class StaticWidget : public QWidget
 {
 Q_OBJECT
diff --git a/tests/manual/repaint/splitter/main.cpp b/tests/manual/repaint/splitter/main.cpp
index 2c4ca1d..d260f00 100644
--- a/tests/manual/repaint/splitter/main.cpp
+++ b/tests/manual/repaint/splitter/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "../shared/shared.h"
 
 int main(int argc, char **argv)
diff --git a/tests/manual/repaint/splitter/splitter.pro b/tests/manual/repaint/splitter/splitter.pro
index db6b2d2..f20e5fe 100644
--- a/tests/manual/repaint/splitter/splitter.pro
+++ b/tests/manual/repaint/splitter/splitter.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS += ../shared/shared.h
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/tableview/main.cpp b/tests/manual/repaint/tableview/main.cpp
index dc25858..227237a 100644
--- a/tests/manual/repaint/tableview/main.cpp
+++ b/tests/manual/repaint/tableview/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "../shared/shared.h"
 
 class CellWidget : public QWidget
diff --git a/tests/manual/repaint/tableview/tableview.pro b/tests/manual/repaint/tableview/tableview.pro
index 4097c95..6a5aaad 100644
--- a/tests/manual/repaint/tableview/tableview.pro
+++ b/tests/manual/repaint/tableview/tableview.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS +=../shared/shared.h
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/task141091/main.cpp b/tests/manual/repaint/task141091/main.cpp
index b2f639d..9090a2a 100644
--- a/tests/manual/repaint/task141091/main.cpp
+++ b/tests/manual/repaint/task141091/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include <QDebug>
 
 class MyWidget : public QWidget
diff --git a/tests/manual/repaint/task141091/task141091.pro b/tests/manual/repaint/task141091/task141091.pro
index 82ead4b..b54299e 100644
--- a/tests/manual/repaint/task141091/task141091.pro
+++ b/tests/manual/repaint/task141091/task141091.pro
@@ -1,3 +1,3 @@
 CONFIG += console
-
+QT += widgets
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/toplevel/main.cpp b/tests/manual/repaint/toplevel/main.cpp
index cd43fa6..6466fe8 100644
--- a/tests/manual/repaint/toplevel/main.cpp
+++ b/tests/manual/repaint/toplevel/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "../shared/shared.h"
 
 int main(int argc, char **argv)
diff --git a/tests/manual/repaint/toplevel/toplevel.pro b/tests/manual/repaint/toplevel/toplevel.pro
index c2cc19f..a881c24 100644
--- a/tests/manual/repaint/toplevel/toplevel.pro
+++ b/tests/manual/repaint/toplevel/toplevel.pro
@@ -1,4 +1,5 @@
 CONFIG += console
+QT += widgets
 
 HEADERS += ../shared/shared.h
 SOURCES += main.cpp
diff --git a/tests/manual/repaint/widget/main.cpp b/tests/manual/repaint/widget/main.cpp
index 64b9cc8..3ea557a 100644
--- a/tests/manual/repaint/widget/main.cpp
+++ b/tests/manual/repaint/widget/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 #include "../shared/shared.h"
 
 class Child : public StaticWidget
diff --git a/tests/manual/repaint/widget/widget.pro b/tests/manual/repaint/widget/widget.pro
index db6b2d2..f20e5fe 100644
--- a/tests/manual/repaint/widget/widget.pro
+++ b/tests/manual/repaint/widget/widget.pro
@@ -1,2 +1,3 @@
+QT += widgets
 HEADERS += ../shared/shared.h
 SOURCES += main.cpp
diff --git a/tests/manual/socketengine/main.cpp b/tests/manual/socketengine/main.cpp
index 48893f0..349004a 100644
--- a/tests/manual/socketengine/main.cpp
+++ b/tests/manual/socketengine/main.cpp
@@ -49,7 +49,6 @@
 #include <QDebug>
 #include <private/qabstractsocketengine_p.h>
 #include <cstdio>
-#include <strings.h>
 #include <QNetworkConfigurationManager>
 #include <QNetworkConfiguration>
 #include <QNetworkSession>
@@ -97,7 +96,7 @@ int main(int argc, char**argv)
                     // disconnected
                     exit(0);
                 }
-                bzero(buf, bufsize);
+                qFill(buf, buf + bufsize, 0);
                 ret = socketEngine->read(buf, available);
                 if (ret > 0) {
                     printf("%s", buf);
diff --git a/tests/manual/socketengine/socketengine.pro b/tests/manual/socketengine/socketengine.pro
index 808502c..9683138 100644
--- a/tests/manual/socketengine/socketengine.pro
+++ b/tests/manual/socketengine/socketengine.pro
@@ -3,8 +3,6 @@ TEMPLATE = app
 TARGET = tst_socketengine
 
 QT -= gui
-QT += network testlib
-
-CONFIG += release
+QT += network-private core-private testlib
 
 SOURCES += main.cpp
diff --git a/tests/manual/textrendering/glyphshaping/glyphshaping.pro b/tests/manual/textrendering/glyphshaping/glyphshaping.pro
index 1d78aa3..6500814 100644
--- a/tests/manual/textrendering/glyphshaping/glyphshaping.pro
+++ b/tests/manual/textrendering/glyphshaping/glyphshaping.pro
@@ -1,3 +1,4 @@
+QT += widgets
 SOURCES = main.cpp
 OTHER_FILES = glyphshaping_data.xml
 glyphshaping_data.path = .
diff --git a/tests/manual/textrendering/glyphshaping/main.cpp b/tests/manual/textrendering/glyphshaping/main.cpp
index c41301f..5a8cc4f 100644
--- a/tests/manual/textrendering/glyphshaping/main.cpp
+++ b/tests/manual/textrendering/glyphshaping/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 static const int fontPixelSize = 25;
 static const QLatin1String fontFamily("Series 60 Sans");
diff --git a/tests/manual/textrendering/textperformance/main.cpp b/tests/manual/textrendering/textperformance/main.cpp
index c6a0c73..cff0c1a 100644
--- a/tests/manual/textrendering/textperformance/main.cpp
+++ b/tests/manual/textrendering/textperformance/main.cpp
@@ -39,7 +39,7 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets>
 
 static const int lastMeasurementsCount = 50;
 
diff --git a/tests/manual/textrendering/textperformance/textperformance.pro b/tests/manual/textrendering/textperformance/textperformance.pro
index bba41b9..f07a4f0 100644
--- a/tests/manual/textrendering/textperformance/textperformance.pro
+++ b/tests/manual/textrendering/textperformance/textperformance.pro
@@ -1 +1,2 @@
+QT += widgets
 SOURCES = main.cpp
diff --git a/tests/manual/textrendering/textrendering.pro b/tests/manual/textrendering/textrendering.pro
new file mode 100644
index 0000000..92f0741
--- /dev/null
+++ b/tests/manual/textrendering/textrendering.pro
@@ -0,0 +1,4 @@
+TEMPLATE=subdirs
+
+SUBDIRS = glyphshaping \
+    textperformance
diff --git a/tests/manual/widgets/itemviews/delegate/delegate.pro b/tests/manual/widgets/itemviews/delegate/delegate.pro
new file mode 100644
index 0000000..e5c90f1
--- /dev/null
+++ b/tests/manual/widgets/itemviews/delegate/delegate.pro
@@ -0,0 +1,3 @@
+TEMPLATE = app
+QT += widgets
+SOURCES=example.cpp
diff --git a/tests/manual/widgets/itemviews/delegate/example.pro b/tests/manual/widgets/itemviews/delegate/example.pro
deleted file mode 100644
index e9f2189..0000000
--- a/tests/manual/widgets/itemviews/delegate/example.pro
+++ /dev/null
@@ -1,2 +0,0 @@
-TEMPLATE = app
-SOURCES=example.cpp
diff --git a/tests/manual/windowflags/controllerwindow.cpp b/tests/manual/windowflags/controllerwindow.cpp
index 69535b2..586691a 100644
--- a/tests/manual/windowflags/controllerwindow.cpp
+++ b/tests/manual/windowflags/controllerwindow.cpp
@@ -39,7 +39,14 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets/QMainWindow>
+#include <QtWidgets/QLabel>
+#include <QtWidgets/QPushButton>
+#include <QtWidgets/QRadioButton>
+#include <QtWidgets/QCheckBox>
+#include <QtWidgets/QGroupBox>
+#include <QtWidgets/QApplication>
+#include <QtWidgets/QHBoxLayout>
 
 #include "controllerwindow.h"
 
@@ -72,7 +79,8 @@ ControllerWindow::ControllerWindow()
     mainLayout->addLayout(bottomLayout);
     setLayout(mainLayout);
 
-    setWindowTitle(tr("Window Flags"));
+    setWindowTitle(tr("Window Flags (Qt version %1, %2)")
+                   .arg(QLatin1String(qVersion()), qApp->platformName()));
     updatePreview();
 }
 
diff --git a/tests/manual/windowflags/previewwindow.cpp b/tests/manual/windowflags/previewwindow.cpp
index 601cc50..684d1ee 100644
--- a/tests/manual/windowflags/previewwindow.cpp
+++ b/tests/manual/windowflags/previewwindow.cpp
@@ -39,7 +39,9 @@
 **
 ****************************************************************************/
 
-#include <QtGui>
+#include <QtWidgets/QTextEdit>
+#include <QtWidgets/QPushButton>
+#include <QtWidgets/QVBoxLayout>
 
 #include "previewwindow.h"
 
diff --git a/tests/manual/windowflags/windowflags.pro b/tests/manual/windowflags/windowflags.pro
index 1b45d0d..06def21 100644
--- a/tests/manual/windowflags/windowflags.pro
+++ b/tests/manual/windowflags/windowflags.pro
@@ -1,3 +1,5 @@
+QT += widgets
+
 HEADERS       = controllerwindow.h \
                 previewwindow.h
 SOURCES       = controllerwindow.cpp \
diff --git a/tests/manual/windowmodality/modality.pro b/tests/manual/windowmodality/modality.pro
deleted file mode 100644
index 973579c..0000000
--- a/tests/manual/windowmodality/modality.pro
+++ /dev/null
@@ -1,3 +0,0 @@
-SOURCES = main.cpp
-FORMS = widget.ui dialog.ui
-QT += widgets printsupport
diff --git a/tests/manual/windowmodality/windowmodality.pro b/tests/manual/windowmodality/windowmodality.pro
new file mode 100644
index 0000000..973579c
--- /dev/null
+++ b/tests/manual/windowmodality/windowmodality.pro
@@ -0,0 +1,3 @@
+SOURCES = main.cpp
+FORMS = widget.ui dialog.ui
+QT += widgets printsupport