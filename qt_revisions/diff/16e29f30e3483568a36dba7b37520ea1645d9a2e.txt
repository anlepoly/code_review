diff --git a/tests/auto/particles/qquickage/qquickage.pro b/tests/auto/particles/qquickage/qquickage.pro
index 99c768f..8e5c2f0 100644
--- a/tests/auto/particles/qquickage/qquickage.pro
+++ b/tests/auto/particles/qquickage/qquickage.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickangleddirection/qquickangleddirection.pro b/tests/auto/particles/qquickangleddirection/qquickangleddirection.pro
index 6899ee6..df8d460 100644
--- a/tests/auto/particles/qquickangleddirection/qquickangleddirection.pro
+++ b/tests/auto/particles/qquickangleddirection/qquickangleddirection.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickcumulativedirection/qquickcumulativedirection.pro b/tests/auto/particles/qquickcumulativedirection/qquickcumulativedirection.pro
index b5d3efa..4ea8739 100644
--- a/tests/auto/particles/qquickcumulativedirection/qquickcumulativedirection.pro
+++ b/tests/auto/particles/qquickcumulativedirection/qquickcumulativedirection.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickcustomaffector/qquickcustomaffector.pro b/tests/auto/particles/qquickcustomaffector/qquickcustomaffector.pro
index b1533d6..0855187 100644
--- a/tests/auto/particles/qquickcustomaffector/qquickcustomaffector.pro
+++ b/tests/auto/particles/qquickcustomaffector/qquickcustomaffector.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickcustomparticle/qquickcustomparticle.pro b/tests/auto/particles/qquickcustomparticle/qquickcustomparticle.pro
index 6666c91..d5c21ab 100644
--- a/tests/auto/particles/qquickcustomparticle/qquickcustomparticle.pro
+++ b/tests/auto/particles/qquickcustomparticle/qquickcustomparticle.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickellipseextruder/qquickellipseextruder.pro b/tests/auto/particles/qquickellipseextruder/qquickellipseextruder.pro
index b7eedb0..33241a4 100644
--- a/tests/auto/particles/qquickellipseextruder/qquickellipseextruder.pro
+++ b/tests/auto/particles/qquickellipseextruder/qquickellipseextruder.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickfriction/qquickfriction.pro b/tests/auto/particles/qquickfriction/qquickfriction.pro
index 19c789d..36cf9aa 100644
--- a/tests/auto/particles/qquickfriction/qquickfriction.pro
+++ b/tests/auto/particles/qquickfriction/qquickfriction.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickgravity/qquickgravity.pro b/tests/auto/particles/qquickgravity/qquickgravity.pro
index a3fab38..331def2 100644
--- a/tests/auto/particles/qquickgravity/qquickgravity.pro
+++ b/tests/auto/particles/qquickgravity/qquickgravity.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickgroupgoal/qquickgroupgoal.pro b/tests/auto/particles/qquickgroupgoal/qquickgroupgoal.pro
index b97549e..f7f09ed 100644
--- a/tests/auto/particles/qquickgroupgoal/qquickgroupgoal.pro
+++ b/tests/auto/particles/qquickgroupgoal/qquickgroupgoal.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private testlib
 
diff --git a/tests/auto/particles/qquickimageparticle/qquickimageparticle.pro b/tests/auto/particles/qquickimageparticle/qquickimageparticle.pro
index 590f698..226d844 100644
--- a/tests/auto/particles/qquickimageparticle/qquickimageparticle.pro
+++ b/tests/auto/particles/qquickimageparticle/qquickimageparticle.pro
@@ -6,4 +6,4 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/particles/qquickitemparticle/qquickitemparticle.pro b/tests/auto/particles/qquickitemparticle/qquickitemparticle.pro
index b275e4b..ec7fa48 100644
--- a/tests/auto/particles/qquickitemparticle/qquickitemparticle.pro
+++ b/tests/auto/particles/qquickitemparticle/qquickitemparticle.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquicklineextruder/qquicklineextruder.pro b/tests/auto/particles/qquicklineextruder/qquicklineextruder.pro
index 519b3e4..a1297b1 100644
--- a/tests/auto/particles/qquicklineextruder/qquicklineextruder.pro
+++ b/tests/auto/particles/qquicklineextruder/qquicklineextruder.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickmaskextruder/qquickmaskextruder.pro b/tests/auto/particles/qquickmaskextruder/qquickmaskextruder.pro
index 48aeadd..99f50a2 100644
--- a/tests/auto/particles/qquickmaskextruder/qquickmaskextruder.pro
+++ b/tests/auto/particles/qquickmaskextruder/qquickmaskextruder.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickparticlegroup/qquickparticlegroup.pro b/tests/auto/particles/qquickparticlegroup/qquickparticlegroup.pro
index d3e132f..c5c908e 100644
--- a/tests/auto/particles/qquickparticlegroup/qquickparticlegroup.pro
+++ b/tests/auto/particles/qquickparticlegroup/qquickparticlegroup.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickparticlesystem/qquickparticlesystem.pro b/tests/auto/particles/qquickparticlesystem/qquickparticlesystem.pro
index b241048..2179ae3 100644
--- a/tests/auto/particles/qquickparticlesystem/qquickparticlesystem.pro
+++ b/tests/auto/particles/qquickparticlesystem/qquickparticlesystem.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickpointattractor/qquickpointattractor.pro b/tests/auto/particles/qquickpointattractor/qquickpointattractor.pro
index 22a9ac5..43c8022 100644
--- a/tests/auto/particles/qquickpointattractor/qquickpointattractor.pro
+++ b/tests/auto/particles/qquickpointattractor/qquickpointattractor.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickpointdirection/qquickpointdirection.pro b/tests/auto/particles/qquickpointdirection/qquickpointdirection.pro
index 319bdee..71b21e5 100644
--- a/tests/auto/particles/qquickpointdirection/qquickpointdirection.pro
+++ b/tests/auto/particles/qquickpointdirection/qquickpointdirection.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickrectangleextruder/qquickrectangleextruder.pro b/tests/auto/particles/qquickrectangleextruder/qquickrectangleextruder.pro
index 683f77e..5e59520 100644
--- a/tests/auto/particles/qquickrectangleextruder/qquickrectangleextruder.pro
+++ b/tests/auto/particles/qquickrectangleextruder/qquickrectangleextruder.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickspritegoal/qquickspritegoal.pro b/tests/auto/particles/qquickspritegoal/qquickspritegoal.pro
index 95cf68f..cfe932a 100644
--- a/tests/auto/particles/qquickspritegoal/qquickspritegoal.pro
+++ b/tests/auto/particles/qquickspritegoal/qquickspritegoal.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private testlib
 
diff --git a/tests/auto/particles/qquicktargetdirection/qquicktargetdirection.pro b/tests/auto/particles/qquicktargetdirection/qquicktargetdirection.pro
index a4a09ae..b7ba905 100644
--- a/tests/auto/particles/qquicktargetdirection/qquicktargetdirection.pro
+++ b/tests/auto/particles/qquicktargetdirection/qquicktargetdirection.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquicktrailemitter/qquicktrailemitter.pro b/tests/auto/particles/qquicktrailemitter/qquicktrailemitter.pro
index e169ccd..5a76e2f 100644
--- a/tests/auto/particles/qquicktrailemitter/qquicktrailemitter.pro
+++ b/tests/auto/particles/qquicktrailemitter/qquicktrailemitter.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickturbulence/qquickturbulence.pro b/tests/auto/particles/qquickturbulence/qquickturbulence.pro
index 306d58d..3bfb94a 100644
--- a/tests/auto/particles/qquickturbulence/qquickturbulence.pro
+++ b/tests/auto/particles/qquickturbulence/qquickturbulence.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/particles/qquickwander/qquickwander.pro b/tests/auto/particles/qquickwander/qquickwander.pro
index 94b8837..1cd4269 100644
--- a/tests/auto/particles/qquickwander/qquickwander.pro
+++ b/tests/auto/particles/qquickwander/qquickwander.pro
@@ -6,5 +6,5 @@ macx:CONFIG -= app_bundle
 include (../../shared/util.pri)
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
 
diff --git a/tests/auto/qml/debugger/qqmlinspector/app/app.pro b/tests/auto/qml/debugger/qqmlinspector/app/app.pro
index f6ef983..9c7574a 100644
--- a/tests/auto/qml/debugger/qqmlinspector/app/app.pro
+++ b/tests/auto/qml/debugger/qqmlinspector/app/app.pro
@@ -1,5 +1,5 @@
 TARGET = app
-QT += qml quick widgets
+QT += qml quick
 
 CONFIG += declarative_debug
 macx:CONFIG -= app_bundle
diff --git a/tests/auto/qml/qqmlincubator/qqmlincubator.pro b/tests/auto/qml/qqmlincubator/qqmlincubator.pro
index b6ce22d..6c4692d 100644
--- a/tests/auto/qml/qqmlincubator/qqmlincubator.pro
+++ b/tests/auto/qml/qqmlincubator/qqmlincubator.pro
@@ -13,4 +13,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private network widgets testlib
+QT += core-private gui-private v8-private qml-private network testlib
diff --git a/tests/auto/qml/qqmlinfo/qqmlinfo.pro b/tests/auto/qml/qqmlinfo/qqmlinfo.pro
index 050bad6..891e698 100644
--- a/tests/auto/qml/qqmlinfo/qqmlinfo.pro
+++ b/tests/auto/qml/qqmlinfo/qqmlinfo.pro
@@ -9,4 +9,4 @@ include (../../shared/util.pri)
 TESTDATA = data/*
 
 CONFIG += parallel_test
-QT += core-private gui-private qml-private widgets testlib
+QT += core-private gui-private qml-private testlib
diff --git a/tests/auto/qml/qqmlmetatype/qqmlmetatype.pro b/tests/auto/qml/qqmlmetatype/qqmlmetatype.pro
index 7c781dd..d723907 100644
--- a/tests/auto/qml/qqmlmetatype/qqmlmetatype.pro
+++ b/tests/auto/qml/qqmlmetatype/qqmlmetatype.pro
@@ -4,4 +4,4 @@ SOURCES += tst_qqmlmetatype.cpp
 macx:CONFIG -= app_bundle
 
 CONFIG += parallel_test
-QT += core-private gui-private qml-private widgets testlib
+QT += core-private gui-private qml-private testlib
diff --git a/tests/auto/qml/qqmlproperty/qqmlproperty.pro b/tests/auto/qml/qqmlproperty/qqmlproperty.pro
index 6d87890..c32545d 100644
--- a/tests/auto/qml/qqmlproperty/qqmlproperty.pro
+++ b/tests/auto/qml/qqmlproperty/qqmlproperty.pro
@@ -10,4 +10,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private widgets testlib
+QT += core-private gui-private v8-private qml-private testlib
diff --git a/tests/auto/qml/qquickconnection/qquickconnection.pro b/tests/auto/qml/qquickconnection/qquickconnection.pro
index baef334..46f7971 100644
--- a/tests/auto/qml/qquickconnection/qquickconnection.pro
+++ b/tests/auto/qml/qquickconnection/qquickconnection.pro
@@ -10,4 +10,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/qml/qquicklistmodel/qquicklistmodel.pro b/tests/auto/qml/qquicklistmodel/qquicklistmodel.pro
index 25b28bb..6f558a7 100644
--- a/tests/auto/qml/qquicklistmodel/qquicklistmodel.pro
+++ b/tests/auto/qml/qquicklistmodel/qquicklistmodel.pro
@@ -10,4 +10,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/examples/examples.pro b/tests/auto/quick/examples/examples.pro
index 5907ba2..c320fda 100644
--- a/tests/auto/quick/examples/examples.pro
+++ b/tests/auto/quick/examples/examples.pro
@@ -7,6 +7,6 @@ DEFINES += SRCDIR=\\\"$$PWD\\\"
 
 CONFIG += parallel_test
 #temporary
-QT += core-private gui-private qml-private quick-private widgets-private v8-private testlib
+QT += core-private gui-private qml-private quick-private v8-private testlib
 
 cross_compile: DEFINES += QTEST_CROSS_COMPILED
diff --git a/tests/auto/quick/geometry/geometry.pro b/tests/auto/quick/geometry/geometry.pro
index 41fcab7..0b7e64d 100644
--- a/tests/auto/quick/geometry/geometry.pro
+++ b/tests/auto/quick/geometry/geometry.pro
@@ -6,4 +6,4 @@ SOURCES += tst_geometry.cpp
 
 CONFIG+=parallel_test
 
-QT += core-private gui-private qml-private quick-private opengl testlib
+QT += core-private gui-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquickanimations/qquickanimations.pro b/tests/auto/quick/qquickanimations/qquickanimations.pro
index d9c3ea2..5c0bd3a 100644
--- a/tests/auto/quick/qquickanimations/qquickanimations.pro
+++ b/tests/auto/quick/qquickanimations/qquickanimations.pro
@@ -10,7 +10,7 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib widgets
 
 # QTBUG-23385 - color mixing tests failing on Ubuntu 11.10 x64
 linux-*:system(". /etc/lsb-release && [ $DISTRIB_CODENAME = oneiric ]"):DEFINES+=UBUNTU_ONEIRIC
diff --git a/tests/auto/quick/qquickanimations/tst_qquickanimations.cpp b/tests/auto/quick/qquickanimations/tst_qquickanimations.cpp
index dd01099..d71100d 100644
--- a/tests/auto/quick/qquickanimations/tst_qquickanimations.cpp
+++ b/tests/auto/quick/qquickanimations/tst_qquickanimations.cpp
@@ -190,9 +190,6 @@ void tst_qquickanimations::simpleColor()
     QVERIFY(animation.isPaused());
     animation.setCurrentTime(125);
     QVERIFY(animation.currentTime() == 125);
-#if defined(UBUNTU_ONEIRIC) && defined(__x86_64__)
-    QEXPECT_FAIL("", "Fails on this platform - QTBUG-23385", Abort);
-#endif
     QCOMPARE(rect.color(), QColor::fromRgbF(0.498039, 0, 0.498039, 1));
 
     rect.setColor(QColor("green"));
@@ -746,9 +743,6 @@ void tst_qquickanimations::mixedTypes()
 
         //rather inexact -- is there a better way?
         QVERIFY(myRect->x() > 100 && myRect->x() < 200);
-#if defined(UBUNTU_ONEIRIC) && defined(__x86_64__)
-        QEXPECT_FAIL("", "Fails on this platform - QTBUG-23385", Continue);
-#endif
         QVERIFY(myRect->color() != QColor("red") && myRect->color() != QColor("blue"));
     }
 }
diff --git a/tests/auto/quick/qquickbehaviors/qquickbehaviors.pro b/tests/auto/quick/qquickbehaviors/qquickbehaviors.pro
index dcffad6..e8165c2 100644
--- a/tests/auto/quick/qquickbehaviors/qquickbehaviors.pro
+++ b/tests/auto/quick/qquickbehaviors/qquickbehaviors.pro
@@ -10,4 +10,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquickborderimage/qquickborderimage.pro b/tests/auto/quick/qquickborderimage/qquickborderimage.pro
index c967d57..998b66f 100644
--- a/tests/auto/quick/qquickborderimage/qquickborderimage.pro
+++ b/tests/auto/quick/qquickborderimage/qquickborderimage.pro
@@ -12,4 +12,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private qml-private quick-private network widgets testlib
+QT += core-private gui-private qml-private quick-private network testlib
diff --git a/tests/auto/quick/qquickborderimage/tst_qquickborderimage.cpp b/tests/auto/quick/qquickborderimage/tst_qquickborderimage.cpp
index 13b12f6..173f230 100644
--- a/tests/auto/quick/qquickborderimage/tst_qquickborderimage.cpp
+++ b/tests/auto/quick/qquickborderimage/tst_qquickborderimage.cpp
@@ -43,7 +43,6 @@
 #include <QTcpServer>
 #include <QTcpSocket>
 #include <QDir>
-#include <QGraphicsScene>
 #include <QPainter>
 
 #include <QtQml/qqmlengine.h>
diff --git a/tests/auto/quick/qquickcanvasitem/qquickcanvasitem.pro b/tests/auto/quick/qquickcanvasitem/qquickcanvasitem.pro
index b0122f9..6d5706b 100644
--- a/tests/auto/quick/qquickcanvasitem/qquickcanvasitem.pro
+++ b/tests/auto/quick/qquickcanvasitem/qquickcanvasitem.pro
@@ -1,4 +1,4 @@
-QT += core-private gui-private qml-private widgets
+QT += core-private gui-private qml-private
 TEMPLATE=app
 TARGET=tst_qquickcanvasitem
 
diff --git a/tests/auto/quick/qquickflickable/tst_qquickflickable.cpp b/tests/auto/quick/qquickflickable/tst_qquickflickable.cpp
index e46659e..a2ecadf 100644
--- a/tests/auto/quick/qquickflickable/tst_qquickflickable.cpp
+++ b/tests/auto/quick/qquickflickable/tst_qquickflickable.cpp
@@ -50,7 +50,6 @@
 #include "../../shared/util.h"
 #include "../shared/viewtestutil.h"
 #include "../shared/visualtestutil.h"
-#include <QtOpenGL/QGLShaderProgram>
 
 using namespace QQuickViewTestUtil;
 using namespace QQuickVisualTestUtil;
diff --git a/tests/auto/quick/qquickflipable/tst_qquickflipable.cpp b/tests/auto/quick/qquickflipable/tst_qquickflipable.cpp
index 2f39935..4fe1551 100644
--- a/tests/auto/quick/qquickflipable/tst_qquickflipable.cpp
+++ b/tests/auto/quick/qquickflipable/tst_qquickflipable.cpp
@@ -47,7 +47,6 @@
 #include <QFontMetrics>
 #include <QtQuick/private/qquickrectangle_p.h>
 #include <math.h>
-#include <QtOpenGL/QGLShaderProgram>
 #include "../../shared/util.h"
 
 class tst_qquickflipable : public QQmlDataTest
diff --git a/tests/auto/quick/qquickgridview/qquickgridview.pro b/tests/auto/quick/qquickgridview/qquickgridview.pro
index b4a234e..ed2007d 100644
--- a/tests/auto/quick/qquickgridview/qquickgridview.pro
+++ b/tests/auto/quick/qquickgridview/qquickgridview.pro
@@ -10,4 +10,4 @@ include (../shared/util.pri)
 TESTDATA = data/*
 
 CONFIG += parallel_test
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib widgets
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquickitem/qquickitem.pro b/tests/auto/quick/qquickitem/qquickitem.pro
index cbbd6e5..ee40be6 100644
--- a/tests/auto/quick/qquickitem/qquickitem.pro
+++ b/tests/auto/quick/qquickitem/qquickitem.pro
@@ -9,4 +9,4 @@ macx:CONFIG -= app_bundle
 TESTDATA = data/*
 
 CONFIG += parallel_test
-QT += core-private gui-private v8-private qml-private quick-private widgets testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquickitem2/qquickitem2.pro b/tests/auto/quick/qquickitem2/qquickitem2.pro
index 887c879..589d1bd 100644
--- a/tests/auto/quick/qquickitem2/qquickitem2.pro
+++ b/tests/auto/quick/qquickitem2/qquickitem2.pro
@@ -10,4 +10,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquicklistview/qquicklistview.pro b/tests/auto/quick/qquicklistview/qquicklistview.pro
index d4d97e2..c1b24ba 100644
--- a/tests/auto/quick/qquicklistview/qquicklistview.pro
+++ b/tests/auto/quick/qquicklistview/qquicklistview.pro
@@ -11,4 +11,4 @@ include (../shared/util.pri)
 
 TESTDATA = data/*
 
-QT += core-private gui-private qml-private quick-private widgets widgets-private v8-private opengl-private testlib
+QT += core-private gui-private qml-private quick-private v8-private testlib
diff --git a/tests/auto/quick/qquickmousearea/tst_qquickmousearea.cpp b/tests/auto/quick/qquickmousearea/tst_qquickmousearea.cpp
index 82563b0..a4b04bb 100644
--- a/tests/auto/quick/qquickmousearea/tst_qquickmousearea.cpp
+++ b/tests/auto/quick/qquickmousearea/tst_qquickmousearea.cpp
@@ -47,7 +47,6 @@
 #include <QtQuick/qquickview.h>
 #include <QtQml/qqmlcontext.h>
 #include <QtQml/qqmlengine.h>
-#include <QtOpenGL/QGLShaderProgram>
 #include "../../shared/util.h"
 
 //#define OLDWAY
diff --git a/tests/auto/quick/qquickpositioners/qquickpositioners.pro b/tests/auto/quick/qquickpositioners/qquickpositioners.pro
index 243d034..dbbfae0 100644
--- a/tests/auto/quick/qquickpositioners/qquickpositioners.pro
+++ b/tests/auto/quick/qquickpositioners/qquickpositioners.pro
@@ -10,4 +10,4 @@ macx:CONFIG -= app_bundle
 TESTDATA = data/*
 
 CONFIG += parallel_test
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquickshadereffect/qquickshadereffect.pro b/tests/auto/quick/qquickshadereffect/qquickshadereffect.pro
index 6ff50a0..142d368 100644
--- a/tests/auto/quick/qquickshadereffect/qquickshadereffect.pro
+++ b/tests/auto/quick/qquickshadereffect/qquickshadereffect.pro
@@ -5,4 +5,4 @@ SOURCES += tst_qquickshadereffect.cpp
 macx:CONFIG -= app_bundle
 
 CONFIG += parallel_test
-QT += core-private gui-private qml-private quick-private widgets testlib
+QT += core-private gui-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquickstates/qquickstates.pro b/tests/auto/quick/qquickstates/qquickstates.pro
index 5f2b8cd..783e109 100644
--- a/tests/auto/quick/qquickstates/qquickstates.pro
+++ b/tests/auto/quick/qquickstates/qquickstates.pro
@@ -9,4 +9,4 @@ include (../../shared/util.pri)
 TESTDATA = data/*
 
 CONFIG += parallel_test
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquicktext/qquicktext.pro b/tests/auto/quick/qquicktext/qquicktext.pro
index 53e170a..8932664 100644
--- a/tests/auto/quick/qquicktext/qquicktext.pro
+++ b/tests/auto/quick/qquicktext/qquicktext.pro
@@ -14,4 +14,4 @@ TESTDATA = data/*
 
 CONFIG += parallel_test
 
-QT += core-private gui-private v8-private qml-private quick-private widgets-private opengl-private network testlib
+QT += core-private gui-private v8-private qml-private quick-private network testlib
diff --git a/tests/auto/quick/qquicktext/tst_qquicktext.cpp b/tests/auto/quick/qquicktext/tst_qquicktext.cpp
index 54b5a04..92e8528 100644
--- a/tests/auto/quick/qquicktext/tst_qquicktext.cpp
+++ b/tests/auto/quick/qquicktext/tst_qquicktext.cpp
@@ -47,10 +47,9 @@
 #include <private/qquicktext_p_p.h>
 #include <private/qqmlvaluetype_p.h>
 #include <QFontMetrics>
-#include <QGraphicsSceneMouseEvent>
 #include <qmath.h>
 #include <QtQuick/QQuickView>
-#include <private/qapplication_p.h>
+#include <private/qguiapplication_p.h>
 #include <limits.h>
 #include <QtGui/QMouseEvent>
 #include "../../shared/util.h"
diff --git a/tests/auto/quick/qquicktextedit/qquicktextedit.pro b/tests/auto/quick/qquicktextedit/qquicktextedit.pro
index 23459f2..8325003 100644
--- a/tests/auto/quick/qquicktextedit/qquicktextedit.pro
+++ b/tests/auto/quick/qquicktextedit/qquicktextedit.pro
@@ -11,4 +11,4 @@ include (../../shared/util.pri)
 
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private network widgets-private testlib
+QT += core-private gui-private v8-private qml-private quick-private network-private testlib
diff --git a/tests/auto/quick/qquicktextedit/tst_qquicktextedit.cpp b/tests/auto/quick/qquicktextedit/tst_qquicktextedit.cpp
index c98e5eb..a90b23d 100644
--- a/tests/auto/quick/qquicktextedit/tst_qquicktextedit.cpp
+++ b/tests/auto/quick/qquicktextedit/tst_qquicktextedit.cpp
@@ -55,7 +55,6 @@
 #include <QFontMetrics>
 #include <QtQuick/QQuickView>
 #include <QDir>
-#include <QStyle>
 #include <QInputMethod>
 #include <QClipboard>
 #include <QMimeData>
diff --git a/tests/auto/quick/qquicktextinput/qquicktextinput.pro b/tests/auto/quick/qquicktextinput/qquicktextinput.pro
index 046e6ab..13b087e 100644
--- a/tests/auto/quick/qquicktextinput/qquicktextinput.pro
+++ b/tests/auto/quick/qquicktextinput/qquicktextinput.pro
@@ -8,4 +8,4 @@ include (../../shared/util.pri)
 
 TESTDATA = data/*
 
-QT += core-private gui-private v8-private qml-private quick-private opengl-private testlib
+QT += core-private gui-private v8-private qml-private quick-private testlib
diff --git a/tests/auto/quick/qquicktextinput/tst_qquicktextinput.cpp b/tests/auto/quick/qquicktextinput/tst_qquicktextinput.cpp
index bdd18d6..c5db92a 100644
--- a/tests/auto/quick/qquicktextinput/tst_qquicktextinput.cpp
+++ b/tests/auto/quick/qquicktextinput/tst_qquicktextinput.cpp
@@ -53,8 +53,6 @@
 #include <private/qquicktextinput_p_p.h>
 #include <QDebug>
 #include <QDir>
-#include <QStyle>
-#include <QtOpenGL/QGLShaderProgram>
 #include <math.h>
 
 #ifdef Q_OS_MAC